{"_type":"hive-mind-meta","version":"0.1","sessionId":"agent-adc4377","checkoutId":"deb16c4b-0302-4e62-8640-ec42acb25027","extractedAt":"2026-01-07T01:45:43.908Z","rawMtime":"2026-01-02T00:57:22.685Z","messageCount":20,"rawPath":"/Users/yoav/.claude/projects/-Users-yoav-projects-alignment-hive/agent-adc4377.jsonl","agentId":"adc4377","parentSessionId":"dd381a75-8ab9-47f2-8af2-fbee06a8f556"}
{"type":"user","uuid":"a0daf523-3de8-4b63-a683-a7456d9c3575","parentUuid":null,"timestamp":"2026-01-02T00:56:38.325Z","sessionId":"dd381a75-8ab9-47f2-8af2-fbee06a8f556","cwd":"/Users/yoav/projects/alignment-hive","gitBranch":"main","version":"2.0.76","message":{"role":"user","content":"I need concrete evidence about the `.local.md` pattern for plugin state storage in Claude Code:\n\n1. Where exactly is this documented? Provide the URL or file path.\n2. Is it stored at project scope (`.claude/plugin-name.local.md` in project root) or user scope (`~/.claude/plugin-name.local.md`)?\n3. Are there any examples of plugins using this pattern?\n4. Is there an alternative pattern for storing plugin state?\n\nSearch thoroughly for any official documentation or examples. Do not run bash commands."},"isSidechain":true,"agentId":"adc4377"}
{"type":"assistant","uuid":"29bcebce-7008-4372-bbb8-de5b6e55bde6","parentUuid":"a0daf523-3de8-4b63-a683-a7456d9c3575","timestamp":"2026-01-02T00:56:39.960Z","sessionId":"dd381a75-8ab9-47f2-8af2-fbee06a8f556","message":{"role":"assistant","content":[{"type":"text","text":"I'll search for official documentation and examples of the `.local.md` pattern for plugin state storage."}],"model":"claude-haiku-4-5-20251001","stop_reason":null,"usage":{"input_tokens":3,"cache_creation_input_tokens":8355,"cache_read_input_tokens":0,"cache_creation":{"ephemeral_5m_input_tokens":8355,"ephemeral_1h_input_tokens":0},"output_tokens":2,"service_tier":"standard"},"type":"message","stop_sequence":null},"isSidechain":true,"cwd":"/Users/yoav/projects/alignment-hive","version":"2.0.76","gitBranch":"main","agentId":"adc4377"}
{"type":"assistant","uuid":"333cbabb-3953-434a-abd6-0c8e3f3d4aa4","parentUuid":"29bcebce-7008-4372-bbb8-de5b6e55bde6","timestamp":"2026-01-02T00:56:40.585Z","sessionId":"dd381a75-8ab9-47f2-8af2-fbee06a8f556","message":{"role":"assistant","content":[{"type":"tool_use","id":"toolu_01PRbj6SzVfR2xCgu2hykXCR","name":"WebFetch","input":{"url":"https://platform.claude.com/llms.txt","prompt":"Find documentation about .local.md pattern for plugin settings and state storage in Claude Code"}}],"model":"claude-haiku-4-5-20251001","stop_reason":null,"usage":{"input_tokens":3,"cache_creation_input_tokens":8355,"cache_read_input_tokens":0,"cache_creation":{"ephemeral_5m_input_tokens":8355,"ephemeral_1h_input_tokens":0},"output_tokens":2,"service_tier":"standard"},"type":"message","stop_sequence":null},"isSidechain":true,"cwd":"/Users/yoav/projects/alignment-hive","version":"2.0.76","gitBranch":"main","agentId":"adc4377"}
{"type":"assistant","uuid":"ad1092f9-0d2a-41e6-8c7d-c4d70b7f9c4f","parentUuid":"333cbabb-3953-434a-abd6-0c8e3f3d4aa4","timestamp":"2026-01-02T00:56:40.757Z","sessionId":"dd381a75-8ab9-47f2-8af2-fbee06a8f556","message":{"role":"assistant","content":[{"type":"tool_use","id":"toolu_01XMc6RqZgbLEE39gspxp1aV","name":"Glob","input":{"pattern":"**/.local.md"}}],"model":"claude-haiku-4-5-20251001","stop_reason":null,"usage":{"input_tokens":3,"cache_creation_input_tokens":8355,"cache_read_input_tokens":0,"cache_creation":{"ephemeral_5m_input_tokens":8355,"ephemeral_1h_input_tokens":0},"output_tokens":2,"service_tier":"standard"},"type":"message","stop_sequence":null},"isSidechain":true,"cwd":"/Users/yoav/projects/alignment-hive","version":"2.0.76","gitBranch":"main","agentId":"adc4377"}
{"type":"assistant","uuid":"cc6a2149-d3e3-4e04-97ad-780fbc993c6c","parentUuid":"ad1092f9-0d2a-41e6-8c7d-c4d70b7f9c4f","timestamp":"2026-01-02T00:56:41.068Z","sessionId":"dd381a75-8ab9-47f2-8af2-fbee06a8f556","message":{"role":"assistant","content":[{"type":"tool_use","id":"toolu_01VHQDkn9unPDTMdVXEe98HB","name":"Grep","input":{"pattern":"\\.local\\.md","glob":"**/*.md"}}],"model":"claude-haiku-4-5-20251001","stop_reason":null,"usage":{"input_tokens":3,"cache_creation_input_tokens":8355,"cache_read_input_tokens":0,"cache_creation":{"ephemeral_5m_input_tokens":8355,"ephemeral_1h_input_tokens":0},"output_tokens":2,"service_tier":"standard"},"type":"message","stop_sequence":null},"isSidechain":true,"cwd":"/Users/yoav/projects/alignment-hive","version":"2.0.76","gitBranch":"main","agentId":"adc4377"}
{"type":"assistant","uuid":"e92032bf-9dc8-4296-bc03-5cf418e6ea3f","parentUuid":"cc6a2149-d3e3-4e04-97ad-780fbc993c6c","timestamp":"2026-01-02T00:56:41.605Z","sessionId":"dd381a75-8ab9-47f2-8af2-fbee06a8f556","message":{"role":"assistant","content":[{"type":"tool_use","id":"toolu_01MPr5thoiufwGchnBXd6bbE","name":"WebFetch","input":{"url":"https://code.claude.com/docs/en/claude_code_docs_map.md","prompt":"Find documentation about plugin settings, state storage, and .local.md pattern"}}],"model":"claude-haiku-4-5-20251001","stop_reason":null,"usage":{"input_tokens":3,"cache_creation_input_tokens":8355,"cache_read_input_tokens":0,"cache_creation":{"ephemeral_5m_input_tokens":8355,"ephemeral_1h_input_tokens":0},"output_tokens":302,"service_tier":"standard"},"type":"message","stop_sequence":null},"isSidechain":true,"cwd":"/Users/yoav/projects/alignment-hive","version":"2.0.76","gitBranch":"main","agentId":"adc4377"}
{"type":"user","uuid":"722035df-d83d-47f8-b674-ff812824f567","parentUuid":"e92032bf-9dc8-4296-bc03-5cf418e6ea3f","timestamp":"2026-01-02T00:56:43.269Z","sessionId":"dd381a75-8ab9-47f2-8af2-fbee06a8f556","cwd":"/Users/yoav/projects/alignment-hive","gitBranch":"main","version":"2.0.76","message":{"role":"user","content":[{"type":"tool_result","tool_use_id":"toolu_01VHQDkn9unPDTMdVXEe98HB","content":"No files found"}]},"isSidechain":true,"agentId":"adc4377"}
{"type":"user","uuid":"6465745d-7f74-4757-a3fd-f8f3b65f3ba9","parentUuid":"722035df-d83d-47f8-b674-ff812824f567","timestamp":"2026-01-02T00:56:43.505Z","sessionId":"dd381a75-8ab9-47f2-8af2-fbee06a8f556","cwd":"/Users/yoav/projects/alignment-hive","gitBranch":"main","version":"2.0.76","message":{"role":"user","content":[{"type":"tool_result","tool_use_id":"toolu_01XMc6RqZgbLEE39gspxp1aV","content":"No files found"}]},"isSidechain":true,"agentId":"adc4377"}
{"type":"user","uuid":"cf7d95d8-b18c-4746-bff0-b24b7731f43b","parentUuid":"6465745d-7f74-4757-a3fd-f8f3b65f3ba9","timestamp":"2026-01-02T00:56:43.927Z","sessionId":"dd381a75-8ab9-47f2-8af2-fbee06a8f556","cwd":"/Users/yoav/projects/alignment-hive","gitBranch":"main","version":"2.0.76","message":{"role":"user","content":[{"type":"tool_result","tool_use_id":"toolu_01MPr5thoiufwGchnBXd6bbE","content":"# null\n\n# Claude Code Documentation Map\n\nThis is a comprehensive map of all Claude Code documentation pages with their headings, designed for easy navigation by LLMs.\n\n> **Note:** This file is auto-generated by GitHub Actions. Do not edit manually.\n> Last updated: 2025-11-06 00:10:13 UTC\n\n## Document Structure\n\nThis map uses a hierarchical structure:\n\n* **##** marks documentation groups (e.g., 'Getting started')\n* **###** marks individual documentation pages\n* **Nested bullets** show the heading structure within each page\n* Each page title links to the full documentation\n\n## Getting started\n\n### [overview](https://code.claude.com/docs/en/overview.md)\n\n* Get started in 30 seconds\n* What Claude Code does for you\n* Why developers love Claude Code\n* Next steps\n* Additional resources\n\n### [quickstart](https://code.claude.com/docs/en/quickstart.md)\n\n* Before you begin\n* Step 1: Install Claude Code\n* Step 2: Log in to your account\n* Step 3: Start your first session\n* Step 4: Ask your first question\n* Step 5: Make your first code change\n* Step 6: Use Git with Claude Code\n* Step 7: Fix a bug or add a feature\n* Step 8: Test out other common workflows\n* Essential commands\n* Pro tips for beginners\n* What's next?\n* Getting help\n\n### [common-workflows](https://code.claude.com/docs/en/common-workflows.md)\n\n* Understand new codebases\n  * Get a quick codebase overview\n  * Find relevant code\n* Fix bugs efficiently\n* Refactor code\n* Use specialized subagents\n* Use Plan Mode for safe code analysis\n  * When to use Plan Mode\n  * How to use Plan Mode\n  * Example: Planning a complex refactor\n  * Configure Plan Mode as default\n* Work with tests\n* Create pull requests\n* Handle documentation\n* Work with images\n* Reference files and directories\n* Use extended thinking\n* Resume previous conversations\n* Run parallel Claude Code sessions with Git worktrees\n* Use Claude as a unix-style utility\n  * Add Claude to your verification process\n  * Pipe in, pipe out\n  * Control output format\n* Create custom slash commands\n  * Create project-specific commands\n  * Add command arguments with \\$ARGUMENTS\n  * Create personal slash commands\n* Ask Claude about its capabilities\n  * Example questions\n* Next steps\n\n### [claude-code-on-the-web](https://code.claude.com/docs/en/claude-code-on-the-web.md)\n\n* What is Claude Code on the web?\n* Who can use Claude Code on the web?\n* Getting started\n* How it works\n* Moving tasks between web and terminal\n  * From web to terminal\n* Cloud environment\n  * Default image\n    * Checking available tools\n    * Language-specific setups\n  * Environment configuration\n  * Dependency management\n    * Local vs remote execution\n    * Persisting environment variables\n* Network access and security\n  * Network policy\n    * GitHub proxy\n    * Security proxy\n  * Access levels\n  * Default allowed domains\n    * Anthropic Services\n    * Version Control\n    * Container Registries\n    * Cloud Platforms\n    * Package Managers - JavaScript/Node\n    * Package Managers - Python\n    * Package Managers - Ruby\n    * Package Managers - Rust\n    * Package Managers - Go\n    * Package Managers - JVM\n    * Package Managers - Other Languages\n    * Linux Distributions\n    * Development Tools & Platforms\n    * Cloud Services & Monitoring\n    * Content Delivery & Mirrors\n    * Schema & Configuration\n  * Security best practices for customized network access\n* Security and isolation\n* Pricing and rate limits\n* Limitations\n* Best practices\n* Related resources\n\n## Build with Claude Code\n\n### [sub-agents](https://code.claude.com/docs/en/sub-agents.md)\n\n* What are subagents?\n* Key benefits\n* Quick start\n* Subagent configuration\n  * File locations\n  * Plugin agents\n  * CLI-based configuration\n  * File format\n    * Configuration fields\n  * Model selection\n  * Available tools\n* Managing subagents\n  * Using the /agents command (Recommended)\n  * Direct file management\n* Using subagents effectively\n  * Automatic delegation\n  * Explicit invocation\n* Built-in subagents\n  * Plan subagent\n* Example subagents\n  * Code reviewer\n  * Debugger\n  * Data scientist\n* Best practices\n* Advanced usage\n  * Chaining subagents\n  * Dynamic subagent selection\n  * Resumable subagents\n* Performance considerations\n* Related documentation\n\n### [plugins](https://code.claude.com/docs/en/plugins.md)\n\n* Quickstart\n  * Prerequisites\n  * Create your first plugin\n* Hello Command\n  * Plugin structure overview\n  * Install and manage plugins\n    * Prerequisites\n    * Add marketplaces\n    * Install plugins\n      * Via interactive menu (recommended for discovery)\n      * Via direct commands (for quick installation)\n    * Verify installation\n  * Set up team plugin workflows\n  * Develop more complex plugins\n    * Add Skills to your plugin\n    * Organize complex plugins\n    * Test your plugins locally\n    * Debug plugin issues\n    * Share your plugins\n  * Next steps\n    * For plugin users\n    * For plugin developers\n    * For team leads and administrators\n  * See also\n\n### [skills](https://code.claude.com/docs/en/skills.md)\n\n* Prerequisites\n* What are Agent Skills?\n* Create a Skill\n  * Personal Skills\n  * Project Skills\n  * Plugin Skills\n* Write SKILL.md\n* Add supporting files\n* Restrict tool access with allowed-tools\n* View available Skills\n* Test a Skill\n* Debug a Skill\n  * Make description specific\n  * Verify file path\n  * Check YAML syntax\n  * View errors\n* Share Skills with your team\n  * Step 1: Add Skill to your project\n  * Step 2: Commit to git\n  * Step 3: Team members get Skills automatically\n* Update a Skill\n* Remove a Skill\n* Best practices\n  * Keep Skills focused\n  * Write clear descriptions\n  * Test with your team\n  * Document Skill versions\n* Troubleshooting\n  * Claude doesn't use my Skill\n  * Skill has errors\n  * Multiple Skills conflict\n* Examples\n  * Simple Skill (single file)\n  * Skill with tool permissions\n  * Multi-file Skill\n* Next steps\n\n### [output-styles](https://code.claude.com/docs/en/output-styles.md)\n\n* Built-in output styles\n* How output styles work\n* Change your output style\n* Create a custom output style\n* Comparisons to related features\n  * Output Styles vs. CLAUDE.md vs. --append-system-prompt\n  * Output Styles vs. [Agents](/en/sub-agents)\n  * Output Styles vs. [Custom Slash Commands](/en/slash-commands)\n\n### [hooks-guide](https://code.claude.com/docs/en/hooks-guide.md)\n\n* Hook Events Overview\n* Quickstart\n  * Prerequisites\n  * Step 1: Open hooks configuration\n  * Step 2: Add a matcher\n  * Step 3: Add the hook\n  * Step 4: Save your configuration\n  * Step 5: Verify your hook\n  * Step 6: Test your hook\n* More Examples\n  * Code Formatting Hook\n  * Markdown Formatting Hook\n  * Custom Notification Hook\n  * File Protection Hook\n* Learn more\n\n### [headless](https://code.claude.com/docs/en/headless.md)\n\n* Overview\n* Basic usage\n* Configuration Options\n* Multi-turn conversations\n* Output Formats\n  * Text Output (Default)\n  * JSON Output\n  * Streaming JSON Output\n* Input Formats\n  * Text Input (Default)\n  * Streaming JSON Input\n* Agent Integration Examples\n  * SRE Incident Response Bot\n  * Automated Security Review\n  * Multi-turn Legal Assistant\n* Best Practices\n* Related Resources\n\n### [github-actions](https://code.claude.com/docs/en/github-actions.md)\n\n* Why use Claude Code GitHub Actions?\n* What can Claude do?\n  * Claude Code Action\n* Setup\n* Quick setup\n* Manual setup\n* Upgrading from Beta\n  * Essential changes\n  * Breaking Changes Reference\n  * Before and After Example\n* Example use cases\n  * Basic workflow\n  * Using slash commands\n  * Custom automation with prompts\n  * Common use cases\n* Best practices\n  * CLAUDE.md configuration\n  * Security considerations\n  * Optimizing performance\n  * CI costs\n* Configuration examples\n* Using with AWS Bedrock & Google Vertex AI\n  * Prerequisites\n    * For Google Cloud Vertex AI:\n    * For AWS Bedrock:\n* Troubleshooting\n  * Claude not responding to @claude commands\n  * CI not running on Claude's commits\n  * Authentication errors\n* Advanced configuration\n  * Action parameters\n    * Using claude\\_args\n  * Alternative integration methods\n  * Customizing Claude's behavior\n\n### [gitlab-ci-cd](https://code.claude.com/docs/en/gitlab-ci-cd.md)\n\n* Why use Claude Code with GitLab?\n* How it works\n* What can Claude do?\n* Setup\n  * Quick setup\n  * Manual setup (recommended for production)\n* Example use cases\n  * Turn issues into MRs\n  * Get implementation help\n  * Fix bugs quickly\n* Using with AWS Bedrock & Google Vertex AI\n* Configuration examples\n  * Basic .gitlab-ci.yml (Claude API)\n  * AWS Bedrock job example (OIDC)\n  * Google Vertex AI job example (Workload Identity Federation)\n* Best practices\n  * CLAUDE.md configuration\n  * Security considerations\n  * Optimizing performance\n  * CI costs\n* Security and governance\n* Troubleshooting\n  * Claude not responding to @claude commands\n  * Job can't write comments or open MRs\n  * Authentication errors\n* Advanced configuration\n  * Common parameters and variables\n  * Customizing Claude's behavior\n\n### [mcp](https://code.claude.com/docs/en/mcp.md)\n\n* What you can do with MCP\n* Popular MCP servers\n* Installing MCP servers\n  * Option 1: Add a remote HTTP server\n  * Option 2: Add a remote SSE server\n  * Option 3: Add a local stdio server\n  * Managing your servers\n  * Plugin-provided MCP servers\n* MCP installation scopes\n  * Local scope\n  * Project scope\n  * User scope\n  * Choosing the right scope\n  * Scope hierarchy and precedence\n  * Environment variable expansion in `.mcp.json`\n* Practical examples\n  * Example: Monitor errors with Sentry\n  * Example: Connect to GitHub for code reviews\n  * Example: Query your PostgreSQL database\n* Authenticate with remote MCP servers\n* Add MCP servers from JSON configuration\n* Import MCP servers from Claude Desktop\n* Use Claude Code as an MCP server\n* MCP output limits and warnings\n* Use MCP resources\n  * Reference MCP resources\n* Use MCP prompts as slash commands\n  * Execute MCP prompts\n* Enterprise MCP configuration\n  * Setting up enterprise MCP configuration\n  * Restricting MCP servers with allowlists and denylists\n\n### [migration-guide](https://code.claude.com/docs/en/migration-guide.md)\n\n* Overview\n* What's Changed\n* Migration Steps\n  * For TypeScript/JavaScript Projects\n  * For Python Projects\n* Breaking changes\n  * Python: ClaudeCodeOptions renamed to ClaudeAgentOptions\n  * System prompt no longer default\n  * Settings Sources No Longer Loaded by Default\n* Why the Rename?\n* Getting Help\n* Next Steps\n\n### [troubleshooting](https://code.claude.com/docs/en/troubleshooting.md)\n\n* Common installation issues\n  * Windows installation issues: errors in WSL\n  * Linux and Mac installation issues: permission or command not found errors\n    * Recommended solution: Native Claude Code installation\n* Permissions and authentication\n  * Repeated permission prompts\n  * Authentication issues\n* Performance and stability\n  * High CPU or memory usage\n  * Command hangs or freezes\n  * Search and discovery issues\n  * Slow or incomplete search results on WSL\n* IDE integration issues\n  * JetBrains IDE not detected on WSL2\n    * WSL2 networking modes\n  * Reporting Windows IDE integration issues (both native and WSL)\n  * ESC key not working in JetBrains (IntelliJ, PyCharm, etc.) terminals\n* Markdown formatting issues\n  * Missing language tags in code blocks\n  * Inconsistent spacing and formatting\n  * Best practices for markdown generation\n* Getting more help\n\n## Deployment\n\n### [third-party-integrations](https://code.claude.com/docs/en/third-party-integrations.md)\n\n* Provider comparison\n* Cloud providers\n* Corporate infrastructure\n* Configuration overview\n  * Using Bedrock with corporate proxy\n  * Using Bedrock with LLM Gateway\n  * Using Vertex AI with corporate proxy\n  * Using Vertex AI with LLM Gateway\n  * Authentication configuration\n* Choosing the right deployment configuration\n  * Direct provider access\n  * Corporate proxy\n  * LLM Gateway\n* Debugging\n* Best practices for organizations\n  * 1. Invest in documentation and memory\n  * 2. Simplify deployment\n  * 3. Start with guided usage\n  * 4. Configure security policies\n  * 5. Leverage MCP for integrations\n* Next steps\n\n### [amazon-bedrock](https://code.claude.com/docs/en/amazon-bedrock.md)\n\n* Prerequisites\n* Setup\n  * 1. Submit use case details\n  * 2. Configure AWS credentials\n    * Advanced credential configuration\n      * Example configuration\n      * Configuration settings explained\n  * 3. Configure Claude Code\n  * 4. Model configuration\n  * 5. Output token configuration\n* IAM configuration\n* Troubleshooting\n* Additional resources\n\n### [google-vertex-ai](https://code.claude.com/docs/en/google-vertex-ai.md)\n\n* Prerequisites\n* Region Configuration\n* Setup\n  * 1. Enable Vertex AI API\n  * 2. Request model access\n  * 3. Configure GCP credentials\n  * 4. Configure Claude Code\n  * 5. Model configuration\n* IAM configuration\n* 1M token context window\n* Troubleshooting\n* Additional resources\n\n### [network-config](https://code.claude.com/docs/en/network-config.md)\n\n* Proxy configuration\n  * Environment variables\n  * Basic authentication\n* Custom CA certificates\n* mTLS authentication\n* Network access requirements\n* Additional resources\n\n### [llm-gateway](https://code.claude.com/docs/en/llm-gateway.md)\n\n* LiteLLM configuration\n  * Prerequisites\n  * Basic LiteLLM setup\n    * Authentication methods\n      * Static API key\n      * Dynamic API key with helper\n    * Unified endpoint (recommended)\n    * Provider-specific pass-through endpoints (alternative)\n      * Claude API through LiteLLM\n      * Amazon Bedrock through LiteLLM\n      * Google Vertex AI through LiteLLM\n  * Model selection\n* Additional resources\n\n### [devcontainer](https://code.claude.com/docs/en/devcontainer.md)\n\n* Key features\n* Getting started in 4 steps\n* Configuration breakdown\n* Security features\n* Customization options\n* Example use cases\n  * Secure client work\n  * Team onboarding\n  * Consistent CI/CD environments\n* Related resources\n\n### [sandboxing](https://code.claude.com/docs/en/sandboxing.md)\n\n* Overview\n* Why sandboxing matters\n* How it works\n  * Filesystem isolation\n  * Network isolation\n  * OS-level enforcement\n* Getting started\n  * Enable sandboxing\n  * Configure sandboxing\n* Security benefits\n  * Protection against prompt injection\n  * Reduced attack surface\n  * Transparent operation\n* Security Limitations\n* Advanced usage\n  * Custom proxy configuration\n  * Integration with existing security tools\n* Best practices\n* Open source\n* Limitations\n* See also\n\n## Administration\n\n### [setup](https://code.claude.com/docs/en/setup.md)\n\n* System requirements\n  * Additional dependencies\n* Standard installation\n* Windows setup\n* Alternative installation methods\n  * Native installation options\n  * NPM installation\n* Running on AWS or GCP\n* Update Claude Code\n  * Auto updates\n  * Update manually\n\n### [iam](https://code.claude.com/docs/en/iam.md)\n\n* Authentication methods\n  * Claude API authentication\n  * Cloud provider authentication\n* Access control and permissions\n  * Permission system\n  * Configuring permissions\n    * Permission modes\n    * Working directories\n    * Tool-specific permission rules\n  * Additional permission control with hooks\n  * Enterprise managed policy settings\n  * Settings precedence\n* Credential management\n\n### [security](https://code.claude.com/docs/en/security.md)\n\n* How we approach security\n  * Security foundation\n  * Permission-based architecture\n  * Built-in protections\n  * User responsibility\n* Protect against prompt injection\n  * Core protections\n  * Privacy safeguards\n  * Additional safeguards\n* MCP security\n* IDE security\n* Cloud execution security\n* Security best practices\n  * Working with sensitive code\n  * Team security\n  * Reporting security issues\n* Related resources\n\n### [data-usage](https://code.claude.com/docs/en/data-usage.md)\n\n* Data policies\n  * Data training policy\n  * Development Partner Program\n  * Feedback using the `/bug` command\n  * Session quality surveys\n  * Data retention\n* Data flow and dependencies\n  * Cloud execution\n* Telemetry services\n* Default behaviors by API provider\n\n### [monitoring-usage](https://code.claude.com/docs/en/monitoring-usage.md)\n\n* Quick Start\n* Administrator Configuration\n* Configuration Details\n  * Common Configuration Variables\n  * Metrics Cardinality Control\n  * Dynamic Headers\n    * Settings Configuration\n    * Script Requirements\n    * Important Limitations\n  * Multi-Team Organization Support\n  * Example Configurations\n* Available Metrics and Events\n  * Standard Attributes\n  * Metrics\n  * Metric Details\n    * Session Counter\n    * Lines of Code Counter\n    * Pull Request Counter\n    * Commit Counter\n    * Cost Counter\n    * Token Counter\n    * Code Edit Tool Decision Counter\n    * Active Time Counter\n  * Events\n    * User Prompt Event\n    * Tool Result Event\n    * API Request Event\n    * API Error Event\n    * Tool Decision Event\n* Interpreting Metrics and Events Data\n  * Usage Monitoring\n  * Cost Monitoring\n  * Alerting and Segmentation\n  * Event Analysis\n* Backend Considerations\n  * For Metrics:\n  * For Events/Logs:\n* Service Information\n* ROI Measurement Resources\n* Security/Privacy Considerations\n* Monitoring Claude Code on Amazon Bedrock\n\n### [costs](https://code.claude.com/docs/en/costs.md)\n\n* Track your costs\n  * Using the `/cost` command\n  * Additional tracking options\n* Managing costs for teams\n  * Rate limit recommendations\n* Reduce token usage\n* Background token usage\n* Tracking version changes and updates\n  * Current version information\n  * Understanding changes in Claude Code behavior\n  * When cost reporting changes\n\n### [analytics](https://code.claude.com/docs/en/analytics.md)\n\n* Access analytics\n  * Required roles\n* Available metrics\n  * Lines of code accepted\n  * Suggestion accept rate\n  * Activity\n  * Spend\n  * Team insights\n* Using analytics effectively\n  * Monitor adoption\n  * Measure productivity\n* Related resources\n\n### [plugin-marketplaces](https://code.claude.com/docs/en/plugin-marketplaces.md)\n\n* Overview\n  * Prerequisites\n* Add and use marketplaces\n  * Add GitHub marketplaces\n  * Add Git repositories\n  * Add local marketplaces for development\n  * Install plugins from marketplaces\n  * Verify marketplace installation\n* Configure team marketplaces\n* Create your own marketplace\n  * Prerequisites for marketplace creation\n  * Create the marketplace file\n  * Marketplace schema\n    * Required fields\n    * Optional metadata\n  * Plugin entries\n    * Optional plugin fields\n  * Plugin sources\n    * Relative paths\n    * GitHub repositories\n    * Git repositories\n    * Advanced plugin entries\n* Host and distribute marketplaces\n  * Host on GitHub (recommended)\n  * Host on other git services\n  * Use local marketplaces for development\n* Manage marketplace operations\n  * List known marketplaces\n  * Update marketplace metadata\n  * Remove a marketplace\n* Troubleshooting marketplaces\n  * Common marketplace issues\n    * Marketplace not loading\n    * Plugin installation failures\n  * Validation and testing\n* Next steps\n  * For marketplace users\n  * For marketplace creators\n  * For organizations\n* See also\n\n## Configuration\n\n### [settings](https://code.claude.com/docs/en/settings.md)\n\n* Settings files\n  * Available settings\n  * Permission settings\n  * Sandbox settings\n  * Settings precedence\n  * Key points about the configuration system\n  * System prompt availability\n  * Excluding sensitive files\n* Subagent configuration\n* Plugin configuration\n  * Plugin settings\n    * `enabledPlugins`\n    * `extraKnownMarketplaces`\n  * Managing plugins\n* Environment variables\n* Tools available to Claude\n  * Extending tools with hooks\n* See also\n\n### [vs-code](https://code.claude.com/docs/en/vs-code.md)\n\n* VS Code Extension (Beta)\n  * Features\n  * Requirements\n  * Installation\n  * How It Works\n  * Using Third-Party Providers (Vertex and Bedrock)\n    * Environment Variables\n  * Not Yet Implemented\n* Security Considerations\n* Legacy CLI Integration\n* Troubleshooting\n  * Extension Not Installing\n  * Legacy Integration Not Working\n\n### [jetbrains](https://code.claude.com/docs/en/jetbrains.md)\n\n* Supported IDEs\n* Features\n* Installation\n  * Marketplace Installation\n* Usage\n  * From Your IDE\n  * From External Terminals\n* Configuration\n  * Claude Code Settings\n  * Plugin Settings\n    * General Settings\n    * ESC Key Configuration\n* Special Configurations\n  * Remote Development\n  * WSL Configuration\n* Troubleshooting\n  * Plugin Not Working\n  * IDE Not Detected\n  * Command Not Found\n* Security Considerations\n\n### [terminal-config](https://code.claude.com/docs/en/terminal-config.md)\n\n* Themes and appearance\n* Line breaks\n  * Set up Shift+Enter (VS Code or iTerm2):\n  * Set up Option+Enter (VS Code, iTerm2 or macOS Terminal.app):\n* Notification setup\n  * iTerm 2 system notifications\n  * Custom notification hooks\n* Handling large inputs\n* Vim Mode\n\n### [model-config](https://code.claude.com/docs/en/model-config.md)\n\n* Available models\n  * Model aliases\n  * Setting your model\n* Special model behavior\n  * `default` model setting\n  * `opusplan` model setting\n  * Extended context with \\[1m]\n* Checking your current model\n* Environment variables\n  * Prompt caching configuration\n\n### [memory](https://code.claude.com/docs/en/memory.md)\n\n* Determine memory type\n* CLAUDE.md imports\n* How Claude looks up memories\n* Quickly add memories with the `#` shortcut\n* Directly edit memories with `/memory`\n* Set up project memory\n* Organization-level memory management\n* Memory best practices\n\n### [statusline](https://code.claude.com/docs/en/statusline.md)\n\n* Create a custom status line\n* How it Works\n* JSON Input Structure\n* Example Scripts\n  * Simple Status Line\n  * Git-Aware Status Line\n  * Python Example\n  * Node.js Example\n  * Helper Function Approach\n* Tips\n* Troubleshooting\n\n## Reference\n\n### [cli-reference](https://code.claude.com/docs/en/cli-reference.md)\n\n* CLI commands\n* CLI flags\n  * Agents flag format\n  * System prompt flags\n* See also\n\n### [interactive-mode](https://code.claude.com/docs/en/interactive-mode.md)\n\n* Keyboard shortcuts\n  * General controls\n  * Multiline input\n  * Quick commands\n* Vim editor mode\n  * Mode switching\n  * Navigation (NORMAL mode)\n  * Editing (NORMAL mode)\n* Command history\n  * Reverse search with Ctrl+R\n* Background bash commands\n  * How backgrounding works\n  * Bash mode with `!` prefix\n* See also\n\n### [slash-commands](https://code.claude.com/docs/en/slash-commands.md)\n\n* Built-in slash commands\n* Custom slash commands\n  * Syntax\n    * Parameters\n  * Command types\n    * Project commands\n    * Personal commands\n  * Features\n    * Namespacing\n    * Arguments\n      * All arguments with `$ARGUMENTS`\n      * Individual arguments with `$1`, `$2`, etc.\n    * Bash command execution\n    * File references\n    * Thinking mode\n  * Frontmatter\n* Plugin commands\n  * How plugin commands work\n  * Plugin command structure\n  * Invocation patterns\n* MCP slash commands\n  * Command format\n  * Features\n    * Dynamic discovery\n    * Arguments\n    * Naming conventions\n  * Managing MCP connections\n  * MCP permissions and wildcards\n* `SlashCommand` tool\n  * `SlashCommand` tool supported commands\n  * Disable `SlashCommand` tool\n  * Disable specific commands only\n  * `SlashCommand` permission rules\n  * Character budget limit\n* Skills vs slash commands\n  * Use slash commands for\n  * Use Skills for\n  * Key differences\n  * Example comparison\n  * When to use each\n* See also\n\n### [checkpointing](https://code.claude.com/docs/en/checkpointing.md)\n\n* How checkpoints work\n  * Automatic tracking\n  * Rewinding changes\n* Common use cases\n* Limitations\n  * Bash command changes not tracked\n  * External changes not tracked\n  * Not a replacement for version control\n* See also\n\n### [hooks](https://code.claude.com/docs/en/hooks.md)\n\n* Configuration\n  * Structure\n  * Project-Specific Hook Scripts\n  * Plugin hooks\n* Prompt-Based Hooks\n  * How prompt-based hooks work\n  * Configuration\n  * Response schema\n  * Supported hook events\n  * Example: Intelligent Stop hook\n  * Example: SubagentStop with custom logic\n  * Comparison with bash command hooks\n  * Best practices\n* Hook Events\n  * PreToolUse\n  * PermissionRequest\n  * PostToolUse\n  * Notification\n  * UserPromptSubmit\n  * Stop\n  * SubagentStop\n  * PreCompact\n  * SessionStart\n    * Persisting environment variables\n  * SessionEnd\n* Hook Input\n  * PreToolUse Input\n  * PermissionRequest\n  * PostToolUse Input\n  * Notification Input\n  * UserPromptSubmit Input\n  * Stop and SubagentStop Input\n  * PreCompact Input\n  * SessionStart Input\n  * SessionEnd Input\n* Hook Output\n  * Simple: Exit Code\n    * Exit Code 2 Behavior\n  * Advanced: JSON Output\n    * Common JSON Fields\n    * `PreToolUse` Decision Control\n    * `PermissionRequest` Decision Control\n    * `PostToolUse` Decision Control\n    * `UserPromptSubmit` Decision Control\n    * `Stop`/`SubagentStop` Decision Control\n    * `SessionStart` Decision Control\n    * `SessionEnd` Decision Control\n    * Exit Code Example: Bash Command Validation\n    * JSON Output Example: UserPromptSubmit to Add Context and Validation\n    * JSON Output Example: PreToolUse with Approval\n* Working with MCP Tools\n  * MCP Tool Naming\n  * Configuring Hooks for MCP Tools\n* Examples\n* Security Considerations\n  * Disclaimer\n  * Security Best Practices\n  * Configuration Safety\n* Hook Execution Details\n* Debugging\n  * Basic Troubleshooting\n  * Advanced Debugging\n  * Debug Output Example\n\n### [plugins-reference](https://code.claude.com/docs/en/plugins-reference.md)\n\n* Plugin components reference\n  * Commands\n  * Agents\n  * Skills\n  * Hooks\n  * MCP servers\n* Plugin manifest schema\n  * Complete schema\n  * Required fields\n  * Metadata fields\n  * Component path fields\n  * Path behavior rules\n  * Environment variables\n* Plugin directory structure\n  * Standard plugin layout\n  * File locations reference\n* Debugging and development tools\n  * Debugging commands\n  * Common issues\n* Distribution and versioning reference\n  * Version management\n\n## Resources\n\n### [legal-and-compliance](https://code.claude.com/docs/en/legal-and-compliance.md)\n\n* Legal agreements\n  * License\n  * Commercial agreements\n* Compliance\n  * Healthcare compliance (BAA)\n* Security and trust\n  * Trust and safety\n  * Security vulnerability reporting\n\n\n---\n\n> To find navigation and other pages in this documentation, fetch the llms.txt file at: https://code.claude.com/docs/llms.txt"}]},"isSidechain":true,"agentId":"adc4377"}
{"type":"user","uuid":"3c5254da-a260-452c-828c-5ae7e04ca084","parentUuid":"cf7d95d8-b18c-4746-bff0-b24b7731f43b","timestamp":"2026-01-02T00:56:48.229Z","sessionId":"dd381a75-8ab9-47f2-8af2-fbee06a8f556","cwd":"/Users/yoav/projects/alignment-hive","gitBranch":"main","version":"2.0.76","message":{"role":"user","content":[{"type":"tool_result","tool_use_id":"toolu_01PRbj6SzVfR2xCgu2hykXCR","content":"# Claude Code Documentation\n\nI'm Claude Code, Anthropic's official CLI for Claude. Based on the documentation index provided, here's what I can help you with:\n\n## Key Resources\n\n### Getting Started\n- **[Quickstart Guide](https://platform.claude.com/docs/en/get-started.md)** - Get started with Claude\n- **[Intro to Claude](https://platform.claude.com/docs/en/intro.md)** - Learn Claude fundamentals\n- **[Models Overview](https://platform.claude.com/docs/en/about-claude/models/overview.md)** - Explore available models\n\n### Agent SDK (Primary Resource for Claude Code)\n- **[Agent SDK Overview](https://platform.claude.com/docs/en/agent-sdk/overview.md)**\n- **[Python SDK Reference](https://platform.claude.com/docs/en/agent-sdk/python.md)**\n- **[TypeScript SDK Reference](https://platform.claude.com/docs/en/agent-sdk/typescript.md)**\n- **[Agent SDK Quickstart](https://platform.claude.com/docs/en/agent-sdk/quickstart.md)**\n\n### Core Features for Developers\n- **Tool Use**: [Overview](https://platform.claude.com/docs/en/agents-and-tools/tool-use/overview.md) | [Implementation Guide](https://platform.claude.com/docs/en/agents-and-tools/tool-use/implement-tool-use.md)\n- **Agent Skills**: [Overview](https://platform.claude.com/docs/en/agents-and-tools/agent-skills/overview.md) | [Quickstart](https://platform.claude.com/docs/en/agents-and-tools/agent-skills/quickstart.md)\n- **Prompt Engineering**: [Overview](https://platform.claude.com/docs/en/build-with-claude/prompt-engineering/overview.md)\n- **Structured Outputs**: [API Guide](https://platform.claude.com/docs/en/build-with-claude/structured-outputs.md) | [SDK Guide](https://platform.claude.com/docs/en/agent-sdk/structured-outputs.md)\n\n### Documentation Language Support\nThe full documentation is available in 11 languages including English (530 pages), German, Spanish, French, Italian, Japanese, Korean, Portuguese, Russian, and Chinese (simplified/traditional).\n\nFor comprehensive details, see the **[full documentation](https://platform.claude.com/llms-full.txt)** and visit **[platform.claude.com](https://platform.claude.com)** (login required)."}]},"isSidechain":true,"agentId":"adc4377"}
{"type":"assistant","uuid":"078785cc-1242-4167-8373-d546467104bf","parentUuid":"3c5254da-a260-452c-828c-5ae7e04ca084","timestamp":"2026-01-02T00:56:49.948Z","sessionId":"dd381a75-8ab9-47f2-8af2-fbee06a8f556","message":{"role":"assistant","content":[{"type":"text","text":"Now let me search more specifically for `.local.md` documentation and examples:"}],"model":"claude-haiku-4-5-20251001","stop_reason":null,"usage":{"input_tokens":7150,"cache_creation_input_tokens":945,"cache_read_input_tokens":8355,"cache_creation":{"ephemeral_5m_input_tokens":945,"ephemeral_1h_input_tokens":0},"output_tokens":1,"service_tier":"standard"},"type":"message","stop_sequence":null},"isSidechain":true,"cwd":"/Users/yoav/projects/alignment-hive","version":"2.0.76","gitBranch":"main","agentId":"adc4377"}
{"type":"assistant","uuid":"407ca5fd-9a0c-43c9-90f4-67b9bffc7ec1","parentUuid":"078785cc-1242-4167-8373-d546467104bf","timestamp":"2026-01-02T00:56:50.348Z","sessionId":"dd381a75-8ab9-47f2-8af2-fbee06a8f556","message":{"role":"assistant","content":[{"type":"tool_use","id":"toolu_01D3b9S8t9AEcZq3xYSU3RJL","name":"WebFetch","input":{"url":"https://code.claude.com/docs/en/settings.md","prompt":"Find documentation about .local.md files and plugin settings storage patterns"}}],"model":"claude-haiku-4-5-20251001","stop_reason":null,"usage":{"input_tokens":7150,"cache_creation_input_tokens":945,"cache_read_input_tokens":8355,"cache_creation":{"ephemeral_5m_input_tokens":945,"ephemeral_1h_input_tokens":0},"output_tokens":1,"service_tier":"standard"},"type":"message","stop_sequence":null},"isSidechain":true,"cwd":"/Users/yoav/projects/alignment-hive","version":"2.0.76","gitBranch":"main","agentId":"adc4377"}
{"type":"assistant","uuid":"d54206fa-0677-401b-908e-f31125492a7c","parentUuid":"407ca5fd-9a0c-43c9-90f4-67b9bffc7ec1","timestamp":"2026-01-02T00:56:50.737Z","sessionId":"dd381a75-8ab9-47f2-8af2-fbee06a8f556","message":{"role":"assistant","content":[{"type":"tool_use","id":"toolu_01TcUMS9xgBkB1Jc7wCQxKWx","name":"WebFetch","input":{"url":"https://code.claude.com/docs/en/plugins-reference.md","prompt":"Find documentation about plugin state storage and .local.md pattern"}}],"model":"claude-haiku-4-5-20251001","stop_reason":null,"usage":{"input_tokens":7150,"cache_creation_input_tokens":945,"cache_read_input_tokens":8355,"cache_creation":{"ephemeral_5m_input_tokens":945,"ephemeral_1h_input_tokens":0},"output_tokens":1,"service_tier":"standard"},"type":"message","stop_sequence":null},"isSidechain":true,"cwd":"/Users/yoav/projects/alignment-hive","version":"2.0.76","gitBranch":"main","agentId":"adc4377"}
{"type":"assistant","uuid":"bd023a11-aed5-4e31-a238-b0b19a7bd62b","parentUuid":"d54206fa-0677-401b-908e-f31125492a7c","timestamp":"2026-01-02T00:56:51.206Z","sessionId":"dd381a75-8ab9-47f2-8af2-fbee06a8f556","message":{"role":"assistant","content":[{"type":"tool_use","id":"toolu_01Bjn3EZCg2MAt5m1ovV4q8K","name":"Grep","input":{"pattern":"local\\.md","type":"md","path":"/Users/yoav/projects/alignment-hive"}}],"model":"claude-haiku-4-5-20251001","stop_reason":null,"usage":{"input_tokens":7150,"cache_creation_input_tokens":945,"cache_read_input_tokens":8355,"cache_creation":{"ephemeral_5m_input_tokens":945,"ephemeral_1h_input_tokens":0},"output_tokens":1,"service_tier":"standard"},"type":"message","stop_sequence":null},"isSidechain":true,"cwd":"/Users/yoav/projects/alignment-hive","version":"2.0.76","gitBranch":"main","agentId":"adc4377"}
{"type":"assistant","uuid":"1c10d9de-b976-4e25-85eb-3e48cdbac06e","parentUuid":"bd023a11-aed5-4e31-a238-b0b19a7bd62b","timestamp":"2026-01-02T00:56:51.504Z","sessionId":"dd381a75-8ab9-47f2-8af2-fbee06a8f556","message":{"role":"assistant","content":[{"type":"tool_use","id":"toolu_01VyT9Vn9HnuabKnTdrjcUsX","name":"WebSearch","input":{"query":"Claude Code .local.md plugin settings storage pattern 2026"}}],"model":"claude-haiku-4-5-20251001","stop_reason":null,"usage":{"input_tokens":7150,"cache_creation_input_tokens":945,"cache_read_input_tokens":8355,"cache_creation":{"ephemeral_5m_input_tokens":945,"ephemeral_1h_input_tokens":0},"output_tokens":323,"service_tier":"standard"},"type":"message","stop_sequence":null},"isSidechain":true,"cwd":"/Users/yoav/projects/alignment-hive","version":"2.0.76","gitBranch":"main","agentId":"adc4377"}
{"type":"user","uuid":"5912e4e5-2d7e-479f-a907-c1a5af2527e2","parentUuid":"1c10d9de-b976-4e25-85eb-3e48cdbac06e","timestamp":"2026-01-02T00:56:51.911Z","sessionId":"dd381a75-8ab9-47f2-8af2-fbee06a8f556","cwd":"/Users/yoav/projects/alignment-hive","gitBranch":"main","version":"2.0.76","message":{"role":"user","content":[{"type":"tool_result","tool_use_id":"toolu_01TcUMS9xgBkB1Jc7wCQxKWx","content":"# Plugins reference\n\n> Complete technical reference for Claude Code plugin system, including schemas, CLI commands, and component specifications.\n\n<Tip>\n  Looking to install plugins? See [Discover and install plugins](/en/discover-plugins). For creating plugins, see [Plugins](/en/plugins). For distributing plugins, see [Plugin marketplaces](/en/plugin-marketplaces).\n</Tip>\n\nThis reference provides complete technical specifications for the Claude Code plugin system, including component schemas, CLI commands, and development tools.\n\n## Plugin components reference\n\nThis section documents the five types of components that plugins can provide.\n\n### Commands\n\nPlugins add custom slash commands that integrate seamlessly with Claude Code's command system.\n\n**Location**: `commands/` directory in plugin root\n\n**File format**: Markdown files with frontmatter\n\nFor complete details on plugin command structure, invocation patterns, and features, see [Plugin commands](/en/slash-commands#plugin-commands).\n\n### Agents\n\nPlugins can provide specialized subagents for specific tasks that Claude can invoke automatically when appropriate.\n\n**Location**: `agents/` directory in plugin root\n\n**File format**: Markdown files describing agent capabilities\n\n**Agent structure**:\n\n```markdown  theme={null}\n---\ndescription: What this agent specializes in\ncapabilities: [\"task1\", \"task2\", \"task3\"]\n---\n\n# Agent Name\n\nDetailed description of the agent's role, expertise, and when Claude should invoke it.\n\n## Capabilities\n- Specific task the agent excels at\n- Another specialized capability\n- When to use this agent vs others\n\n## Context and examples\nProvide examples of when this agent should be used and what kinds of problems it solves.\n```\n\n**Integration points**:\n\n* Agents appear in the `/agents` interface\n* Claude can invoke agents automatically based on task context\n* Agents can be invoked manually by users\n* Plugin agents work alongside built-in Claude agents\n\n### Skills\n\nPlugins can provide Agent Skills that extend Claude's capabilities. Skills are model-invoked—Claude autonomously decides when to use them based on the task context.\n\n**Location**: `skills/` directory in plugin root\n\n**File format**: Directories containing `SKILL.md` files with frontmatter\n\n**Skill structure**:\n\n```\nskills/\n├── pdf-processor/\n│   ├── SKILL.md\n│   ├── reference.md (optional)\n│   └── scripts/ (optional)\n└── code-reviewer/\n    └── SKILL.md\n```\n\n**Integration behavior**:\n\n* Plugin Skills are automatically discovered when the plugin is installed\n* Claude autonomously invokes Skills based on matching task context\n* Skills can include supporting files alongside SKILL.md\n\nFor SKILL.md format and complete Skill authoring guidance, see:\n\n* [Use Skills in Claude Code](/en/skills)\n* [Agent Skills overview](https://docs.claude.com/en/docs/agents-and-tools/agent-skills/overview#skill-structure)\n\n### Hooks\n\nPlugins can provide event handlers that respond to Claude Code events automatically.\n\n**Location**: `hooks/hooks.json` in plugin root, or inline in plugin.json\n\n**Format**: JSON configuration with event matchers and actions\n\n**Hook configuration**:\n\n```json  theme={null}\n{\n  \"hooks\": {\n    \"PostToolUse\": [\n      {\n        \"matcher\": \"Write|Edit\",\n        \"hooks\": [\n          {\n            \"type\": \"command\",\n            \"command\": \"${CLAUDE_PLUGIN_ROOT}/scripts/format-code.sh\"\n          }\n        ]\n      }\n    ]\n  }\n}\n```\n\n**Available events**:\n\n* `PreToolUse`: Before Claude uses any tool\n* `PostToolUse`: After Claude successfully uses any tool\n* `PostToolUseFailure`: After Claude tool execution fails\n* `PermissionRequest`: When a permission dialog is shown\n* `UserPromptSubmit`: When user submits a prompt\n* `Notification`: When Claude Code sends notifications\n* `Stop`: When Claude attempts to stop\n* `SubagentStart`: When a subagent is started\n* `SubagentStop`: When a subagent attempts to stop\n* `SessionStart`: At the beginning of sessions\n* `SessionEnd`: At the end of sessions\n* `PreCompact`: Before conversation history is compacted\n\n**Hook types**:\n\n* `command`: Execute shell commands or scripts\n* `prompt`: Evaluate a prompt with an LLM (uses `$ARGUMENTS` placeholder for context)\n* `agent`: Run an agentic verifier with tools for complex verification tasks\n\n### MCP servers\n\nPlugins can bundle Model Context Protocol (MCP) servers to connect Claude Code with external tools and services.\n\n**Location**: `.mcp.json` in plugin root, or inline in plugin.json\n\n**Format**: Standard MCP server configuration\n\n**MCP server configuration**:\n\n```json  theme={null}\n{\n  \"mcpServers\": {\n    \"plugin-database\": {\n      \"command\": \"${CLAUDE_PLUGIN_ROOT}/servers/db-server\",\n      \"args\": [\"--config\", \"${CLAUDE_PLUGIN_ROOT}/config.json\"],\n      \"env\": {\n        \"DB_PATH\": \"${CLAUDE_PLUGIN_ROOT}/data\"\n      }\n    },\n    \"plugin-api-client\": {\n      \"command\": \"npx\",\n      \"args\": [\"@company/mcp-server\", \"--plugin-mode\"],\n      \"cwd\": \"${CLAUDE_PLUGIN_ROOT}\"\n    }\n  }\n}\n```\n\n**Integration behavior**:\n\n* Plugin MCP servers start automatically when the plugin is enabled\n* Servers appear as standard MCP tools in Claude's toolkit\n* Server capabilities integrate seamlessly with Claude's existing tools\n* Plugin servers can be configured independently of user MCP servers\n\n### LSP servers\n\n<Tip>\n  Looking to use LSP plugins? Install them from the official marketplace—search for \"lsp\" in the `/plugin` Discover tab. This section documents how to create LSP plugins for languages not covered by the official marketplace.\n</Tip>\n\nPlugins can provide [Language Server Protocol](https://microsoft.github.io/language-server-protocol/) (LSP) servers to give Claude real-time code intelligence while working on your codebase.\n\nLSP integration provides:\n\n* **Instant diagnostics**: Claude sees errors and warnings immediately after each edit\n* **Code navigation**: go to definition, find references, and hover information\n* **Language awareness**: type information and documentation for code symbols\n\n**Location**: `.lsp.json` in plugin root, or inline in `plugin.json`\n\n**Format**: JSON configuration mapping language server names to their configurations\n\n**`.lsp.json` file format**:\n\n```json  theme={null}\n{\n  \"go\": {\n    \"command\": \"gopls\",\n    \"args\": [\"serve\"],\n    \"extensionToLanguage\": {\n      \".go\": \"go\"\n    }\n  }\n}\n```\n\n**Inline in `plugin.json`**:\n\n```json  theme={null}\n{\n  \"name\": \"my-plugin\",\n  \"lspServers\": {\n    \"go\": {\n      \"command\": \"gopls\",\n      \"args\": [\"serve\"],\n      \"extensionToLanguage\": {\n        \".go\": \"go\"\n      }\n    }\n  }\n}\n```\n\n**Required fields:**\n\n| Field                 | Description                                  |\n| :-------------------- | :------------------------------------------- |\n| `command`             | The LSP binary to execute (must be in PATH)  |\n| `extensionToLanguage` | Maps file extensions to language identifiers |\n\n**Optional fields:**\n\n| Field                   | Description                                               |\n| :---------------------- | :-------------------------------------------------------- |\n| `args`                  | Command-line arguments for the LSP server                 |\n| `transport`             | Communication transport: `stdio` (default) or `socket`    |\n| `env`                   | Environment variables to set when starting the server     |\n| `initializationOptions` | Options passed to the server during initialization        |\n| `settings`              | Settings passed via `workspace/didChangeConfiguration`    |\n| `workspaceFolder`       | Workspace folder path for the server                      |\n| `startupTimeout`        | Max time to wait for server startup (milliseconds)        |\n| `shutdownTimeout`       | Max time to wait for graceful shutdown (milliseconds)     |\n| `restartOnCrash`        | Whether to automatically restart the server if it crashes |\n| `maxRestarts`           | Maximum number of restart attempts before giving up       |\n| `loggingConfig`         | Debug logging configuration (see below)                   |\n\n**Debug logging configuration:**\n\nThe `loggingConfig` field enables verbose LSP logging when users pass `--enable-lsp-logging`. This helps debug language server issues without impacting normal operation.\n\n```json  theme={null}\n\"loggingConfig\": {\n  \"args\": [\"--log-level\", \"4\"],\n  \"env\": {\n    \"TSS_LOG\": \"-level verbose -file ${CLAUDE_PLUGIN_LSP_LOG_FILE}\"\n  }\n}\n```\n\n| Field  | Description                                                        |\n| :----- | :----------------------------------------------------------------- |\n| `args` | Additional command-line arguments appended when logging is enabled |\n| `env`  | Additional environment variables merged when logging is enabled    |\n\nThe `${CLAUDE_PLUGIN_LSP_LOG_FILE}` variable expands to the log file path. Logs are written to `~/.claude/debug/`.\n\n<Warning>\n  **You must install the language server binary separately.** LSP plugins configure how Claude Code connects to a language server, but they don't include the server itself. If you see `Executable not found in $PATH` in the `/plugin` Errors tab, install the required binary for your language.\n</Warning>\n\n**Available LSP plugins:**\n\n| Plugin           | Language server            | Install command                                                                            |\n| :--------------- | :------------------------- | :----------------------------------------------------------------------------------------- |\n| `pyright-lsp`    | Pyright (Python)           | `pip install pyright` or `npm install -g pyright`                                          |\n| `typescript-lsp` | TypeScript Language Server | `npm install -g typescript-language-server typescript`                                     |\n| `rust-lsp`       | rust-analyzer              | [See rust-analyzer installation](https://rust-analyzer.github.io/manual.html#installation) |\n\nInstall the language server first, then install the plugin from the marketplace.\n\n***\n\n## Plugin installation scopes\n\nWhen you install a plugin, you choose a **scope** that determines where the plugin is available and who else can use it:\n\n| Scope     | Settings file                 | Use case                                                 |\n| :-------- | :---------------------------- | :------------------------------------------------------- |\n| `user`    | `~/.claude/settings.json`     | Personal plugins available across all projects (default) |\n| `project` | `.claude/settings.json`       | Team plugins shared via version control                  |\n| `local`   | `.claude/settings.local.json` | Project-specific plugins, gitignored                     |\n| `managed` | `managed-settings.json`       | Enterprise-managed plugins (read-only, update only)      |\n\nPlugins use the same scope system as other Claude Code configurations. For installation instructions and scope flags, see [Install plugins](/en/discover-plugins#install-plugins). For a complete explanation of scopes, see [Configuration scopes](/en/settings#configuration-scopes).\n\n***\n\n## Plugin manifest schema\n\nThe `plugin.json` file defines your plugin's metadata and configuration. This section documents all supported fields and options.\n\n### Complete schema\n\n```json  theme={null}\n{\n  \"name\": \"plugin-name\",\n  \"version\": \"1.2.0\",\n  \"description\": \"Brief plugin description\",\n  \"author\": {\n    \"name\": \"Author Name\",\n    \"email\": \"author@example.com\",\n    \"url\": \"https://github.com/author\"\n  },\n  \"homepage\": \"https://docs.example.com/plugin\",\n  \"repository\": \"https://github.com/author/plugin\",\n  \"license\": \"MIT\",\n  \"keywords\": [\"keyword1\", \"keyword2\"],\n  \"commands\": [\"./custom/commands/special.md\"],\n  \"agents\": \"./custom/agents/\",\n  \"skills\": \"./custom/skills/\",\n  \"hooks\": \"./config/hooks.json\",\n  \"mcpServers\": \"./mcp-config.json\",\n  \"outputStyles\": \"./styles/\",\n  \"lspServers\": \"./.lsp.json\"\n}\n```\n\n### Required fields\n\n| Field  | Type   | Description                               | Example              |\n| :----- | :----- | :---------------------------------------- | :------------------- |\n| `name` | string | Unique identifier (kebab-case, no spaces) | `\"deployment-tools\"` |\n\n### Metadata fields\n\n| Field         | Type   | Description                         | Example                                            |\n| :------------ | :----- | :---------------------------------- | :------------------------------------------------- |\n| `version`     | string | Semantic version                    | `\"2.1.0\"`                                          |\n| `description` | string | Brief explanation of plugin purpose | `\"Deployment automation tools\"`                    |\n| `author`      | object | Author information                  | `{\"name\": \"Dev Team\", \"email\": \"dev@company.com\"}` |\n| `homepage`    | string | Documentation URL                   | `\"https://docs.example.com\"`                       |\n| `repository`  | string | Source code URL                     | `\"https://github.com/user/plugin\"`                 |\n| `license`     | string | License identifier                  | `\"MIT\"`, `\"Apache-2.0\"`                            |\n| `keywords`    | array  | Discovery tags                      | `[\"deployment\", \"ci-cd\"]`                          |\n\n### Component path fields\n\n| Field          | Type           | Description                                                                                                                                              | Example                                |\n| :------------- | :------------- | :------------------------------------------------------------------------------------------------------------------------------------------------------- | :------------------------------------- |\n| `commands`     | string\\|array  | Additional command files/directories                                                                                                                     | `\"./custom/cmd.md\"` or `[\"./cmd1.md\"]` |\n| `agents`       | string\\|array  | Additional agent files                                                                                                                                   | `\"./custom/agents/\"`                   |\n| `skills`       | string\\|array  | Additional skill directories                                                                                                                             | `\"./custom/skills/\"`                   |\n| `hooks`        | string\\|object | Hook config path or inline config                                                                                                                        | `\"./hooks.json\"`                       |\n| `mcpServers`   | string\\|object | MCP config path or inline config                                                                                                                         | `\"./mcp-config.json\"`                  |\n| `outputStyles` | string\\|array  | Additional output style files/directories                                                                                                                | `\"./styles/\"`                          |\n| `lspServers`   | string\\|object | [Language Server Protocol](https://microsoft.github.io/language-server-protocol/) config for code intelligence (go to definition, find references, etc.) | `\"./.lsp.json\"`                        |\n\n### Path behavior rules\n\n**Important**: Custom paths supplement default directories - they don't replace them.\n\n* If `commands/` exists, it's loaded in addition to custom command paths\n* All paths must be relative to plugin root and start with `./`\n* Commands from custom paths use the same naming and namespacing rules\n* Multiple paths can be specified as arrays for flexibility\n\n**Path examples**:\n\n```json  theme={null}\n{\n  \"commands\": [\n    \"./specialized/deploy.md\",\n    \"./utilities/batch-process.md\"\n  ],\n  \"agents\": [\n    \"./custom-agents/reviewer.md\",\n    \"./custom-agents/tester.md\"\n  ]\n}\n```\n\n### Environment variables\n\n**`${CLAUDE_PLUGIN_ROOT}`**: Contains the absolute path to your plugin directory. Use this in hooks, MCP servers, and scripts to ensure correct paths regardless of installation location.\n\n```json  theme={null}\n{\n  \"hooks\": {\n    \"PostToolUse\": [\n      {\n        \"hooks\": [\n          {\n            \"type\": \"command\",\n            \"command\": \"${CLAUDE_PLUGIN_ROOT}/scripts/process.sh\"\n          }\n        ]\n      }\n    ]\n  }\n}\n```\n\n***\n\n## Plugin caching and file resolution\n\nFor security and verification purposes, Claude Code copies plugins to a cache directory rather than using them in-place. Understanding this behavior is important when developing plugins that reference external files.\n\n### How plugin caching works\n\nWhen you install a plugin, Claude Code copies the plugin files to a cache directory:\n\n* **For marketplace plugins with relative paths**: The path specified in the `source` field is copied recursively. For example, if your marketplace entry specifies `\"source\": \"./plugins/my-plugin\"`, the entire `./plugins` directory is copied.\n* **For plugins with `.claude-plugin/plugin.json`**: The implicit root directory (the directory containing `.claude-plugin/plugin.json`) is copied recursively.\n\n### Path traversal limitations\n\nPlugins cannot reference files outside their copied directory structure. Paths that traverse outside the plugin root (such as `../shared-utils`) will not work after installation because those external files are not copied to the cache.\n\n### Working with external dependencies\n\nIf your plugin needs to access files outside its directory, you have two options:\n\n**Option 1: Use symlinks**\n\nCreate symbolic links to external files within your plugin directory. Symlinks are honored during the copy process:\n\n```bash  theme={null}\n# Inside your plugin directory\nln -s /path/to/shared-utils ./shared-utils\n```\n\nThe symlinked content will be copied into the plugin cache.\n\n**Option 2: Restructure your marketplace**\n\nSet the plugin path to a parent directory that contains all required files, then provide the rest of the plugin manifest directly in the marketplace entry:\n\n```json  theme={null}\n{\n  \"name\": \"my-plugin\",\n  \"source\": \"./\",\n  \"description\": \"Plugin that needs root-level access\",\n  \"commands\": [\"./plugins/my-plugin/commands/\"],\n  \"agents\": [\"./plugins/my-plugin/agents/\"],\n  \"strict\": false\n}\n```\n\nThis approach copies the entire marketplace root, giving your plugin access to sibling directories.\n\n<Note>\n  Symlinks that point to locations outside the plugin's logical root are followed during copying. This provides flexibility while maintaining the security benefits of the caching system.\n</Note>\n\n***\n\n## Plugin directory structure\n\n### Standard plugin layout\n\nA complete plugin follows this structure:\n\n```\nenterprise-plugin/\n├── .claude-plugin/           # Metadata directory\n│   └── plugin.json          # Required: plugin manifest\n├── commands/                 # Default command location\n│   ├── status.md\n│   └── logs.md\n├── agents/                   # Default agent location\n│   ├── security-reviewer.md\n│   ├── performance-tester.md\n│   └── compliance-checker.md\n├── skills/                   # Agent Skills\n│   ├── code-reviewer/\n│   │   └── SKILL.md\n│   └── pdf-processor/\n│       ├── SKILL.md\n│       └── scripts/\n├── hooks/                    # Hook configurations\n│   ├── hooks.json           # Main hook config\n│   └── security-hooks.json  # Additional hooks\n├── .mcp.json                # MCP server definitions\n├── .lsp.json                # LSP server configurations\n├── scripts/                 # Hook and utility scripts\n│   ├── security-scan.sh\n│   ├── format-code.py\n│   └── deploy.js\n├── LICENSE                  # License file\n└── CHANGELOG.md             # Version history\n```\n\n<Warning>\n  The `.claude-plugin/` directory contains the `plugin.json` file. All other directories (commands/, agents/, skills/, hooks/) must be at the plugin root, not inside `.claude-plugin/`.\n</Warning>\n\n### File locations reference\n\n| Component       | Default Location             | Purpose                          |\n| :-------------- | :--------------------------- | :------------------------------- |\n| **Manifest**    | `.claude-plugin/plugin.json` | Required metadata file           |\n| **Commands**    | `commands/`                  | Slash command Markdown files     |\n| **Agents**      | `agents/`                    | Subagent Markdown files          |\n| **Skills**      | `skills/`                    | Agent Skills with SKILL.md files |\n| **Hooks**       | `hooks/hooks.json`           | Hook configuration               |\n| **MCP servers** | `.mcp.json`                  | MCP server definitions           |\n| **LSP servers** | `.lsp.json`                  | Language server configurations   |\n\n***\n\n## CLI commands reference\n\nClaude Code provides CLI commands for non-interactive plugin management, useful for scripting and automation.\n\n### plugin install\n\nInstall a plugin from available marketplaces.\n\n```bash  theme={null}\nclaude plugin install <plugin> [options]\n```\n\n**Arguments:**\n\n* `<plugin>`: Plugin name or `plugin-name@marketplace-name` for a specific marketplace\n\n**Options:**\n\n| Option                | Description                                       | Default |\n| :-------------------- | :------------------------------------------------ | :------ |\n| `-s, --scope <scope>` | Installation scope: `user`, `project`, or `local` | `user`  |\n| `-h, --help`          | Display help for command                          |         |\n\n**Examples:**\n\n```bash  theme={null}\n# Install to user scope (default)\nclaude plugin install formatter@my-marketplace\n\n# Install to project scope (shared with team)\nclaude plugin install formatter@my-marketplace --scope project\n\n# Install to local scope (gitignored)\nclaude plugin install formatter@my-marketplace --scope local\n```\n\n### plugin uninstall\n\nRemove an installed plugin.\n\n```bash  theme={null}\nclaude plugin uninstall <plugin> [options]\n```\n\n**Arguments:**\n\n* `<plugin>`: Plugin name or `plugin-name@marketplace-name`\n\n**Options:**\n\n| Option                | Description                                         | Default |\n| :-------------------- | :-------------------------------------------------- | :------ |\n| `-s, --scope <scope>` | Uninstall from scope: `user`, `project`, or `local` | `user`  |\n| `-h, --help`          | Display help for command                            |         |\n\n**Aliases:** `remove`, `rm`\n\n### plugin enable\n\nEnable a disabled plugin.\n\n```bash  theme={null}\nclaude plugin enable <plugin> [options]\n```\n\n**Arguments:**\n\n* `<plugin>`: Plugin name or `plugin-name@marketplace-name`\n\n**Options:**\n\n| Option                | Description                                    | Default |\n| :-------------------- | :--------------------------------------------- | :------ |\n| `-s, --scope <scope>` | Scope to enable: `user`, `project`, or `local` | `user`  |\n| `-h, --help`          | Display help for command                       |         |\n\n### plugin disable\n\nDisable a plugin without uninstalling it.\n\n```bash  theme={null}\nclaude plugin disable <plugin> [options]\n```\n\n**Arguments:**\n\n* `<plugin>`: Plugin name or `plugin-name@marketplace-name`\n\n**Options:**\n\n| Option                | Description                                     | Default |\n| :-------------------- | :---------------------------------------------- | :------ |\n| `-s, --scope <scope>` | Scope to disable: `user`, `project`, or `local` | `user`  |\n| `-h, --help`          | Display help for command                        |         |\n\n### plugin update\n\nUpdate a plugin to the latest version.\n\n```bash  theme={null}\nclaude plugin update <plugin> [options]\n```\n\n**Arguments:**\n\n* `<plugin>`: Plugin name or `plugin-name@marketplace-name`\n\n**Options:**\n\n| Option                | Description                                               | Default |\n| :-------------------- | :-------------------------------------------------------- | :------ |\n| `-s, --scope <scope>` | Scope to update: `user`, `project`, `local`, or `managed` | `user`  |\n| `-h, --help`          | Display help for command                                  |         |\n\n***\n\n## Debugging and development tools\n\n### Debugging commands\n\nUse `claude --debug` to see plugin loading details:\n\n```bash  theme={null}\nclaude --debug\n```\n\nThis shows:\n\n* Which plugins are being loaded\n* Any errors in plugin manifests\n* Command, agent, and hook registration\n* MCP server initialization\n\n### Common issues\n\n| Issue                               | Cause                           | Solution                                                                          |\n| :---------------------------------- | :------------------------------ | :-------------------------------------------------------------------------------- |\n| Plugin not loading                  | Invalid `plugin.json`           | Validate JSON syntax with `claude plugin validate` or `/plugin validate`          |\n| Commands not appearing              | Wrong directory structure       | Ensure `commands/` at root, not in `.claude-plugin/`                              |\n| Hooks not firing                    | Script not executable           | Run `chmod +x script.sh`                                                          |\n| MCP server fails                    | Missing `${CLAUDE_PLUGIN_ROOT}` | Use variable for all plugin paths                                                 |\n| Path errors                         | Absolute paths used             | All paths must be relative and start with `./`                                    |\n| LSP `Executable not found in $PATH` | Language server not installed   | Install the binary (e.g., `npm install -g typescript-language-server typescript`) |\n\n### Example error messages\n\n**Manifest validation errors**:\n\n* `Invalid JSON syntax: Unexpected token } in JSON at position 142`: check for missing commas, extra commas, or unquoted strings\n* `Plugin has an invalid manifest file at .claude-plugin/plugin.json. Validation errors: name: Required`: a required field is missing\n* `Plugin has a corrupt manifest file at .claude-plugin/plugin.json. JSON parse error: ...`: JSON syntax error\n\n**Plugin loading errors**:\n\n* `Warning: No commands found in plugin my-plugin custom directory: ./cmds. Expected .md files or SKILL.md in subdirectories.`: command path exists but contains no valid command files\n* `Plugin directory not found at path: ./plugins/my-plugin. Check that the marketplace entry has the correct path.`: the `source` path in marketplace.json points to a non-existent directory\n* `Plugin my-plugin has conflicting manifests: both plugin.json and marketplace entry specify components.`: remove duplicate component definitions or set `strict: true` in marketplace entry\n\n### Hook troubleshooting\n\n**Hook script not executing**:\n\n1. Check the script is executable: `chmod +x ./scripts/your-script.sh`\n2. Verify the shebang line: First line should be `#!/bin/bash` or `#!/usr/bin/env bash`\n3. Check the path uses `${CLAUDE_PLUGIN_ROOT}`: `\"command\": \"${CLAUDE_PLUGIN_ROOT}/scripts/your-script.sh\"`\n4. Test the script manually: `./scripts/your-script.sh`\n\n**Hook not triggering on expected events**:\n\n1. Verify the event name is correct (case-sensitive): `PostToolUse`, not `postToolUse`\n2. Check the matcher pattern matches your tools: `\"matcher\": \"Write|Edit\"` for file operations\n3. Confirm the hook type is valid: `command`, `prompt`, or `agent`\n\n### MCP server troubleshooting\n\n**Server not starting**:\n\n1. Check the command exists and is executable\n2. Verify all paths use `${CLAUDE_PLUGIN_ROOT}` variable\n3. Check the MCP server logs: `claude --debug` shows initialization errors\n4. Test the server manually outside of Claude Code\n\n**Server tools not appearing**:\n\n1. Ensure the server is properly configured in `.mcp.json` or `plugin.json`\n2. Verify the server implements the MCP protocol correctly\n3. Check for connection timeouts in debug output\n\n### Directory structure mistakes\n\n**Symptoms**: Plugin loads but components (commands, agents, hooks) are missing.\n\n**Correct structure**: Components must be at the plugin root, not inside `.claude-plugin/`. Only `plugin.json` belongs in `.claude-plugin/`.\n\n```\nmy-plugin/\n├── .claude-plugin/\n│   └── plugin.json      ← Only manifest here\n├── commands/            ← At root level\n├── agents/              ← At root level\n└── hooks/               ← At root level\n```\n\nIf your components are inside `.claude-plugin/`, move them to the plugin root.\n\n**Debug checklist**:\n\n1. Run `claude --debug` and look for \"loading plugin\" messages\n2. Check that each component directory is listed in the debug output\n3. Verify file permissions allow reading the plugin files\n\n***\n\n## Distribution and versioning reference\n\n### Version management\n\nFollow semantic versioning for plugin releases:\n\n```json  theme={null}\n{\n  \"name\": \"my-plugin\",\n  \"version\": \"2.1.0\"\n}\n```\n\n**Version format**: `MAJOR.MINOR.PATCH`\n\n* **MAJOR**: Breaking changes (incompatible API changes)\n* **MINOR**: New features (backward-compatible additions)\n* **PATCH**: Bug fixes (backward-compatible fixes)\n\n**Best practices**:\n\n* Start at `1.0.0` for your first stable release\n* Update the version in `plugin.json` before distributing changes\n* Document changes in a `CHANGELOG.md` file\n* Use pre-release versions like `2.0.0-beta.1` for testing\n\n***\n\n## See also\n\n* [Plugins](/en/plugins) - Tutorials and practical usage\n* [Plugin marketplaces](/en/plugin-marketplaces) - Creating and managing marketplaces\n* [Slash commands](/en/slash-commands) - Command development details\n* [Subagents](/en/sub-agents) - Agent configuration and capabilities\n* [Agent Skills](/en/skills) - Extend Claude's capabilities\n* [Hooks](/en/hooks) - Event handling and automation\n* [MCP](/en/mcp) - External tool integration\n* [Settings](/en/settings) - Configuration options for plugins\n\n\n---\n\n> To find navigation and other pages in this documentation, fetch the llms.txt file at: https://code.claude.com/docs/llms.txt"}]},"isSidechain":true,"agentId":"adc4377"}
{"type":"user","uuid":"df7b95ca-e7d0-48c3-a1ef-87903ab627e8","parentUuid":"5912e4e5-2d7e-479f-a907-c1a5af2527e2","timestamp":"2026-01-02T00:56:52.137Z","sessionId":"dd381a75-8ab9-47f2-8af2-fbee06a8f556","cwd":"/Users/yoav/projects/alignment-hive","gitBranch":"main","version":"2.0.76","message":{"role":"user","content":[{"type":"tool_result","tool_use_id":"toolu_01D3b9S8t9AEcZq3xYSU3RJL","content":"# Claude Code settings\n\n> Configure Claude Code with global and project-level settings, and environment variables.\n\nClaude Code offers a variety of settings to configure its behavior to meet your needs. You can configure Claude Code by running the `/config` command when using the interactive REPL, which opens a tabbed Settings interface where you can view status information and modify configuration options.\n\n## Configuration scopes\n\nClaude Code uses a **scope system** to determine where configurations apply and who they're shared with. Understanding scopes helps you decide how to configure Claude Code for personal use, team collaboration, or enterprise deployment.\n\n### Available scopes\n\n| Scope          | Location                             | Who it affects                       | Shared with team?      |\n| :------------- | :----------------------------------- | :----------------------------------- | :--------------------- |\n| **Enterprise** | System-level `managed-settings.json` | All users on the machine             | Yes (deployed by IT)   |\n| **User**       | `~/.claude/` directory               | You, across all projects             | No                     |\n| **Project**    | `.claude/` in repository             | All collaborators on this repository | Yes (committed to git) |\n| **Local**      | `.claude/*.local.*` files            | You, in this repository only         | No (gitignored)        |\n\n### When to use each scope\n\n**Enterprise scope** is for:\n\n* Security policies that must be enforced organization-wide\n* Compliance requirements that can't be overridden\n* Standardized configurations deployed by IT/DevOps\n\n**User scope** is best for:\n\n* Personal preferences you want everywhere (themes, editor settings)\n* Tools and plugins you use across all projects\n* API keys and authentication (stored securely)\n\n**Project scope** is best for:\n\n* Team-shared settings (permissions, hooks, MCP servers)\n* Plugins the whole team should have\n* Standardizing tooling across collaborators\n\n**Local scope** is best for:\n\n* Personal overrides for a specific project\n* Testing configurations before sharing with the team\n* Machine-specific settings that won't work for others\n\n### How scopes interact\n\nWhen the same setting is configured in multiple scopes, more specific scopes take precedence:\n\n1. **Enterprise** (highest) - can't be overridden by anything\n2. **Command line arguments** - temporary session overrides\n3. **Local** - overrides project and user settings\n4. **Project** - overrides user settings\n5. **User** (lowest) - applies when nothing else specifies the setting\n\nFor example, if a permission is allowed in user settings but denied in project settings, the project setting takes precedence and the permission is blocked.\n\n### What uses scopes\n\nScopes apply to many Claude Code features:\n\n| Feature         | User location             | Project location                   | Local location                 |\n| :-------------- | :------------------------ | :--------------------------------- | :----------------------------- |\n| **Settings**    | `~/.claude/settings.json` | `.claude/settings.json`            | `.claude/settings.local.json`  |\n| **Subagents**   | `~/.claude/agents/`       | `.claude/agents/`                  | —                              |\n| **MCP servers** | `~/.claude.json`          | `.mcp.json`                        | `~/.claude.json` (per-project) |\n| **Plugins**     | `~/.claude/settings.json` | `.claude/settings.json`            | `.claude/settings.local.json`  |\n| **CLAUDE.md**   | `~/.claude/CLAUDE.md`     | `CLAUDE.md` or `.claude/CLAUDE.md` | `CLAUDE.local.md`              |\n\n***\n\n## Settings files\n\nThe `settings.json` file is our official mechanism for configuring Claude\nCode through hierarchical settings:\n\n* **User settings** are defined in `~/.claude/settings.json` and apply to all\n  projects.\n* **Project settings** are saved in your project directory:\n  * `.claude/settings.json` for settings that are checked into source control and shared with your team\n  * `.claude/settings.local.json` for settings that are not checked in, useful for personal preferences and experimentation. Claude Code will configure git to ignore `.claude/settings.local.json` when it is created.\n* **Managed settings** (Enterprise): Enterprise administrators can configure and distribute Claude Code settings to their organization through the [Claude.ai admin console](https://claude.ai/admin-settings/claude-code). These settings are fetched automatically when users authenticate, take precedence over user and project settings, and cannot be overridden locally. This feature is available to Claude for Enterprise customers. If you don't see this option in your admin console, contact your Anthropic account team to have the feature enabled.\n\n  For organizations that prefer file-based policy distribution, Claude Code also supports `managed-settings.json` and `managed-mcp.json` files that can be deployed to system directories:\n\n  * macOS: `/Library/Application Support/ClaudeCode/`\n  * Linux and WSL: `/etc/claude-code/`\n  * Windows: `C:\\Program Files\\ClaudeCode\\`\n\n  <Note>\n    These are system-wide paths (not user home directories like `~/Library/...`) that require administrator privileges. They are designed to be deployed by IT administrators.\n  </Note>\n\n  See [Enterprise managed settings](/en/iam#enterprise-managed-settings) and [Enterprise MCP configuration](/en/mcp#enterprise-mcp-configuration) for details.\n\n  <Note>\n    Enterprise deployments can also restrict **plugin marketplace additions** using\n    `strictKnownMarketplaces`. For more information, see [Enterprise marketplace restrictions](/en/plugin-marketplaces#enterprise-marketplace-restrictions).\n  </Note>\n* **Other configuration** is stored in `~/.claude.json`. This file contains your preferences (theme, notification settings, editor mode), OAuth session, [MCP server](/en/mcp) configurations for user and local scopes, per-project state (allowed tools, trust settings), and various caches. Project-scoped MCP servers are stored separately in `.mcp.json`.\n\n```JSON Example settings.json theme={null}\n{\n  \"permissions\": {\n    \"allow\": [\n      \"Bash(npm run lint)\",\n      \"Bash(npm run test:*)\",\n      \"Read(~/.zshrc)\"\n    ],\n    \"deny\": [\n      \"Bash(curl:*)\",\n      \"Read(./.env)\",\n      \"Read(./.env.*)\",\n      \"Read(./secrets/**)\"\n    ]\n  },\n  \"env\": {\n    \"CLAUDE_CODE_ENABLE_TELEMETRY\": \"1\",\n    \"OTEL_METRICS_EXPORTER\": \"otlp\"\n  },\n  \"companyAnnouncements\": [\n    \"Welcome to Acme Corp! Review our code guidelines at docs.acme.com\",\n    \"Reminder: Code reviews required for all PRs\",\n    \"New security policy in effect\"\n  ]\n}\n```\n\n### Available settings\n\n`settings.json` supports a number of options:\n\n| Key                          | Description                                                                                                                                                                                                                                                                           | Example                                                                 |\n| :--------------------------- | :------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ | :---------------------------------------------------------------------- |\n| `apiKeyHelper`               | Custom script, to be executed in `/bin/sh`, to generate an auth value. This value will be sent as `X-Api-Key` and `Authorization: Bearer` headers for model requests                                                                                                                  | `/bin/generate_temp_api_key.sh`                                         |\n| `cleanupPeriodDays`          | Sessions inactive for longer than this period are deleted at startup. Setting to `0` immediately deletes all sessions. (default: 30 days)                                                                                                                                             | `20`                                                                    |\n| `companyAnnouncements`       | Announcement to display to users at startup. If multiple announcements are provided, they will be cycled through at random.                                                                                                                                                           | `[\"Welcome to Acme Corp! Review our code guidelines at docs.acme.com\"]` |\n| `env`                        | Environment variables that will be applied to every session                                                                                                                                                                                                                           | `{\"FOO\": \"bar\"}`                                                        |\n| `attribution`                | Customize attribution for git commits and pull requests. See [Attribution settings](#attribution-settings)                                                                                                                                                                            | `{\"commit\": \"🤖 Generated with Claude Code\", \"pr\": \"\"}`                 |\n| `includeCoAuthoredBy`        | **Deprecated**: Use `attribution` instead. Whether to include the `co-authored-by Claude` byline in git commits and pull requests (default: `true`)                                                                                                                                   | `false`                                                                 |\n| `permissions`                | See table below for structure of permissions.                                                                                                                                                                                                                                         |                                                                         |\n| `hooks`                      | Configure custom commands to run before or after tool executions. See [hooks documentation](/en/hooks)                                                                                                                                                                                | `{\"PreToolUse\": {\"Bash\": \"echo 'Running command...'\"}}`                 |\n| `disableAllHooks`            | Disable all [hooks](/en/hooks)                                                                                                                                                                                                                                                        | `true`                                                                  |\n| `allowManagedHooksOnly`      | (Enterprise) Prevent loading of user, project, and plugin hooks. Only allows managed hooks and SDK hooks. See [Hook configuration](#hook-configuration)                                                                                                                               | `true`                                                                  |\n| `model`                      | Override the default model to use for Claude Code                                                                                                                                                                                                                                     | `\"claude-sonnet-4-5-20250929\"`                                          |\n| `otelHeadersHelper`          | Script to generate dynamic OpenTelemetry headers. Runs at startup and periodically (see [Dynamic headers](/en/monitoring-usage#dynamic-headers))                                                                                                                                      | `/bin/generate_otel_headers.sh`                                         |\n| `statusLine`                 | Configure a custom status line to display context. See [`statusLine` documentation](/en/statusline)                                                                                                                                                                                   | `{\"type\": \"command\", \"command\": \"~/.claude/statusline.sh\"}`             |\n| `fileSuggestion`             | Configure a custom script for `@` file autocomplete. See [File suggestion settings](#file-suggestion-settings)                                                                                                                                                                        | `{\"type\": \"command\", \"command\": \"~/.claude/file-suggestion.sh\"}`        |\n| `outputStyle`                | Configure an output style to adjust the system prompt. See [output styles documentation](/en/output-styles)                                                                                                                                                                           | `\"Explanatory\"`                                                         |\n| `forceLoginMethod`           | Use `claudeai` to restrict login to Claude.ai accounts, `console` to restrict login to Claude Console (API usage billing) accounts                                                                                                                                                    | `claudeai`                                                              |\n| `forceLoginOrgUUID`          | Specify the UUID of an organization to automatically select it during login, bypassing the organization selection step. Requires `forceLoginMethod` to be set                                                                                                                         | `\"xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx\"`                                |\n| `enableAllProjectMcpServers` | Automatically approve all MCP servers defined in project `.mcp.json` files                                                                                                                                                                                                            | `true`                                                                  |\n| `enabledMcpjsonServers`      | List of specific MCP servers from `.mcp.json` files to approve                                                                                                                                                                                                                        | `[\"memory\", \"github\"]`                                                  |\n| `disabledMcpjsonServers`     | List of specific MCP servers from `.mcp.json` files to reject                                                                                                                                                                                                                         | `[\"filesystem\"]`                                                        |\n| `allowedMcpServers`          | When set in managed-settings.json, allowlist of MCP servers users can configure. Undefined = no restrictions, empty array = lockdown. Applies to all scopes. Denylist takes precedence. See [Enterprise MCP configuration](/en/mcp#enterprise-mcp-configuration)                      | `[{ \"serverName\": \"github\" }]`                                          |\n| `deniedMcpServers`           | When set in managed-settings.json, denylist of MCP servers that are explicitly blocked. Applies to all scopes including enterprise servers. Denylist takes precedence over allowlist. See [Enterprise MCP configuration](/en/mcp#enterprise-mcp-configuration)                        | `[{ \"serverName\": \"filesystem\" }]`                                      |\n| `strictKnownMarketplaces`    | When set in managed-settings.json, allowlist of plugin marketplaces users can add. Undefined = no restrictions, empty array = lockdown. Applies to marketplace additions only. See [Enterprise marketplace restrictions](/en/plugin-marketplaces#enterprise-marketplace-restrictions) | `[{ \"source\": \"github\", \"repo\": \"acme-corp/plugins\" }]`                 |\n| `awsAuthRefresh`             | Custom script that modifies the `.aws` directory (see [advanced credential configuration](/en/amazon-bedrock#advanced-credential-configuration))                                                                                                                                      | `aws sso login --profile myprofile`                                     |\n| `awsCredentialExport`        | Custom script that outputs JSON with AWS credentials (see [advanced credential configuration](/en/amazon-bedrock#advanced-credential-configuration))                                                                                                                                  | `/bin/generate_aws_grant.sh`                                            |\n| `alwaysThinkingEnabled`      | Enable [extended thinking](/en/common-workflows#use-extended-thinking) by default for all sessions. Typically configured via the `/config` command rather than editing directly                                                                                                       | `true`                                                                  |\n\n### Permission settings\n\n| Keys                           | Description                                                                                                                                                                                                                                                                                 | Example                                                                |\n| :----------------------------- | :------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ | :--------------------------------------------------------------------- |\n| `allow`                        | Array of [permission rules](/en/iam#configuring-permissions) to allow tool use. **Note:** Bash rules use prefix matching, not regex                                                                                                                                                         | `[ \"Bash(git diff:*)\" ]`                                               |\n| `ask`                          | Array of [permission rules](/en/iam#configuring-permissions) to ask for confirmation upon tool use.                                                                                                                                                                                         | `[ \"Bash(git push:*)\" ]`                                               |\n| `deny`                         | Array of [permission rules](/en/iam#configuring-permissions) to deny tool use. Use this to also exclude sensitive files from Claude Code access. **Note:** Bash patterns are prefix matches and can be bypassed (see [Bash permission limitations](/en/iam#tool-specific-permission-rules)) | `[ \"WebFetch\", \"Bash(curl:*)\", \"Read(./.env)\", \"Read(./secrets/**)\" ]` |\n| `additionalDirectories`        | Additional [working directories](/en/iam#working-directories) that Claude has access to                                                                                                                                                                                                     | `[ \"../docs/\" ]`                                                       |\n| `defaultMode`                  | Default [permission mode](/en/iam#permission-modes) when opening Claude Code                                                                                                                                                                                                                | `\"acceptEdits\"`                                                        |\n| `disableBypassPermissionsMode` | Set to `\"disable\"` to prevent `bypassPermissions` mode from being activated. This disables the `--dangerously-skip-permissions` command-line flag. See [managed settings](/en/iam#enterprise-managed-settings)                                                                              | `\"disable\"`                                                            |\n\n### Sandbox settings\n\nConfigure advanced sandboxing behavior. Sandboxing isolates bash commands from your filesystem and network. See [Sandboxing](/en/sandboxing) for details.\n\n**Filesystem and network restrictions** are configured via Read, Edit, and WebFetch permission rules, not via these sandbox settings.\n\n| Keys                        | Description                                                                                                                                                                                                                                                                                                                       | Example                   |\n| :-------------------------- | :-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | :------------------------ |\n| `enabled`                   | Enable bash sandboxing (macOS/Linux only). Default: false                                                                                                                                                                                                                                                                         | `true`                    |\n| `autoAllowBashIfSandboxed`  | Auto-approve bash commands when sandboxed. Default: true                                                                                                                                                                                                                                                                          | `true`                    |\n| `excludedCommands`          | Commands that should run outside of the sandbox                                                                                                                                                                                                                                                                                   | `[\"git\", \"docker\"]`       |\n| `allowUnsandboxedCommands`  | Allow commands to run outside the sandbox via the `dangerouslyDisableSandbox` parameter. When set to `false`, the `dangerouslyDisableSandbox` escape hatch is completely disabled and all commands must run sandboxed (or be in `excludedCommands`). Useful for enterprise policies that require strict sandboxing. Default: true | `false`                   |\n| `network.allowUnixSockets`  | Unix socket paths accessible in sandbox (for SSH agents, etc.)                                                                                                                                                                                                                                                                    | `[\"~/.ssh/agent-socket\"]` |\n| `network.allowLocalBinding` | Allow binding to localhost ports (macOS only). Default: false                                                                                                                                                                                                                                                                     | `true`                    |\n| `network.httpProxyPort`     | HTTP proxy port used if you wish to bring your own proxy. If not specified, Claude will run its own proxy.                                                                                                                                                                                                                        | `8080`                    |\n| `network.socksProxyPort`    | SOCKS5 proxy port used if you wish to bring your own proxy. If not specified, Claude will run its own proxy.                                                                                                                                                                                                                      | `8081`                    |\n| `enableWeakerNestedSandbox` | Enable weaker sandbox for unprivileged Docker environments (Linux only). **Reduces security.** Default: false                                                                                                                                                                                                                     | `true`                    |\n\n**Configuration example:**\n\n```json  theme={null}\n{\n  \"sandbox\": {\n    \"enabled\": true,\n    \"autoAllowBashIfSandboxed\": true,\n    \"excludedCommands\": [\"docker\"],\n    \"network\": {\n      \"allowUnixSockets\": [\n        \"/var/run/docker.sock\"\n      ],\n      \"allowLocalBinding\": true\n    }\n  },\n  \"permissions\": {\n    \"deny\": [\n      \"Read(.envrc)\",\n      \"Read(~/.aws/**)\"\n    ]\n  }\n}\n```\n\n**Filesystem and network restrictions** use standard permission rules:\n\n* Use `Read` deny rules to block Claude from reading specific files or directories\n* Use `Edit` allow rules to let Claude write to directories beyond the current working directory\n* Use `Edit` deny rules to block writes to specific paths\n* Use `WebFetch` allow/deny rules to control which network domains Claude can access\n\n### Attribution settings\n\nClaude Code adds attribution to git commits and pull requests. These are configured separately:\n\n* Commits use [git trailers](https://git-scm.com/docs/git-interpret-trailers) (like `Co-Authored-By`) by default,  which can be customized or disabled\n* Pull request descriptions are plain text\n\n| Keys     | Description                                                                                |\n| :------- | :----------------------------------------------------------------------------------------- |\n| `commit` | Attribution for git commits, including any trailers. Empty string hides commit attribution |\n| `pr`     | Attribution for pull request descriptions. Empty string hides pull request attribution     |\n\n**Default commit attribution:**\n\n```\n🤖 Generated with [Claude Code](https://claude.com/claude-code)\n\n   Co-Authored-By: Claude Sonnet 4.5 <noreply@anthropic.com>\n```\n\n**Default pull request attribution:**\n\n```\n🤖 Generated with [Claude Code](https://claude.com/claude-code)\n```\n\n**Example:**\n\n```json  theme={null}\n{\n  \"attribution\": {\n    \"commit\": \"Generated with AI\\n\\nCo-Authored-By: AI <ai@example.com>\",\n    \"pr\": \"\"\n  }\n}\n```\n\n<Note>\n  The `attribution` setting takes precedence over the deprecated `includeCoAuthoredBy` setting. To hide all attribution, set `commit` and `pr` to empty strings.\n</Note>\n\n### File suggestion settings\n\nConfigure a custom command for `@` file path autocomplete. The built-in file suggestion uses fast filesystem traversal, but large monorepos may benefit from project-specific indexing such as a pre-built file index or custom tooling.\n\n```json  theme={null}\n{\n  \"fileSuggestion\": {\n    \"type\": \"command\",\n    \"command\": \"~/.claude/file-suggestion.sh\"\n  }\n}\n```\n\nThe command runs with the same environment variables as [hooks](/en/hooks), including `CLAUDE_PROJECT_DIR`. It receives JSON via stdin with a `query` field:\n\n```json  theme={null}\n{\"query\": \"src/comp\"}\n```\n\nOutput newline-separated file paths to stdout (currently limited to 15):\n\n```\nsrc/components/Button.tsx\nsrc/components/Modal.tsx\nsrc/components/Form.tsx\n```\n\n**Example:**\n\n```bash  theme={null}\n#!/bin/bash\nquery=$(cat | jq -r '.query')\nyour-repo-file-index --query \"$query\" | head -20\n```\n\n### Hook configuration\n\n**Enterprise-only setting**: Controls which hooks are allowed to run. This setting can only be configured in [managed settings](#settings-files) and provides enterprise administrators with strict control over hook execution.\n\n**Behavior when `allowManagedHooksOnly` is `true`:**\n\n* Managed hooks and SDK hooks are loaded\n* User hooks, project hooks, and plugin hooks are blocked\n\n**Configuration:**\n\n```json  theme={null}\n{\n  \"allowManagedHooksOnly\": true\n}\n```\n\n### Settings precedence\n\nSettings apply in order of precedence. From highest to lowest:\n\n1. **Managed settings** (Enterprise)\n   * Remote settings configured via the [Claude.ai admin console](https://claude.ai/admin-settings/claude-code)\n   * Fetched automatically when users authenticate\n   * Cannot be overridden\n\n2. **File-based managed settings** (`managed-settings.json`)\n   * Policies deployed by IT/DevOps to system directories\n   * Cannot be overridden by user or project settings\n   * Ignored when remote managed settings are configured\n\n3. **Command line arguments**\n   * Temporary overrides for a specific session\n\n4. **Local project settings** (`.claude/settings.local.json`)\n   * Personal project-specific settings\n\n5. **Shared project settings** (`.claude/settings.json`)\n   * Team-shared project settings in source control\n\n6. **User settings** (`~/.claude/settings.json`)\n   * Personal global settings\n\nThis hierarchy ensures that enterprise security policies are always enforced while still allowing teams and individuals to customize their experience.\n\nFor example, if your user settings allow `Bash(npm run:*)` but a project's shared settings deny it, the project setting takes precedence and the command is blocked.\n\n### Key points about the configuration system\n\n* **Memory files (`CLAUDE.md`)**: Contain instructions and context that Claude loads at startup\n* **Settings files (JSON)**: Configure permissions, environment variables, and tool behavior\n* **Slash commands**: Custom commands that can be invoked during a session with `/command-name`\n* **MCP servers**: Extend Claude Code with additional tools and integrations\n* **Precedence**: Higher-level configurations (Enterprise) override lower-level ones (User/Project)\n* **Inheritance**: Settings are merged, with more specific settings adding to or overriding broader ones\n\n### System prompt\n\nClaude Code's internal system prompt is not published. To add custom instructions, use `CLAUDE.md` files or the `--append-system-prompt` flag.\n\n### Excluding sensitive files\n\nTo prevent Claude Code from accessing files containing sensitive information like API keys, secrets, and environment files, use the `permissions.deny` setting in your `.claude/settings.json` file:\n\n```json  theme={null}\n{\n  \"permissions\": {\n    \"deny\": [\n      \"Read(./.env)\",\n      \"Read(./.env.*)\",\n      \"Read(./secrets/**)\",\n      \"Read(./config/credentials.json)\",\n      \"Read(./build)\"\n    ]\n  }\n}\n```\n\nThis replaces the deprecated `ignorePatterns` configuration. Files matching these patterns will be completely invisible to Claude Code, preventing any accidental exposure of sensitive data.\n\n## Subagent configuration\n\nClaude Code supports custom AI subagents that can be configured at both user and project levels. These subagents are stored as Markdown files with YAML frontmatter:\n\n* **User subagents**: `~/.claude/agents/` - Available across all your projects\n* **Project subagents**: `.claude/agents/` - Specific to your project and can be shared with your team\n\nSubagent files define specialized AI assistants with custom prompts and tool permissions. Learn more about creating and using subagents in the [subagents documentation](/en/sub-agents).\n\n## Plugin configuration\n\nClaude Code supports a plugin system that lets you extend functionality with custom commands, agents, hooks, and MCP servers. Plugins are distributed through marketplaces and can be configured at both user and repository levels.\n\n### Plugin settings\n\nPlugin-related settings in `settings.json`:\n\n```json  theme={null}\n{\n  \"enabledPlugins\": {\n    \"formatter@acme-tools\": true,\n    \"deployer@acme-tools\": true,\n    \"analyzer@security-plugins\": false\n  },\n  \"extraKnownMarketplaces\": {\n    \"acme-tools\": {\n      \"source\": \"github\",\n      \"repo\": \"acme-corp/claude-plugins\"\n    }\n  }\n}\n```\n\n#### `enabledPlugins`\n\nControls which plugins are enabled. Format: `\"plugin-name@marketplace-name\": true/false`\n\n**Scopes**:\n\n* **User settings** (`~/.claude/settings.json`): Personal plugin preferences\n* **Project settings** (`.claude/settings.json`): Project-specific plugins shared with team\n* **Local settings** (`.claude/settings.local.json`): Per-machine overrides (not committed)\n\n**Example**:\n\n```json  theme={null}\n{\n  \"enabledPlugins\": {\n    \"code-formatter@team-tools\": true,\n    \"deployment-tools@team-tools\": true,\n    \"experimental-features@personal\": false\n  }\n}\n```\n\n#### `extraKnownMarketplaces`\n\nDefines additional marketplaces that should be made available for the repository. Typically used in repository-level settings to ensure team members have access to required plugin sources.\n\n**When a repository includes `extraKnownMarketplaces`**:\n\n1. Team members are prompted to install the marketplace when they trust the folder\n2. Team members are then prompted to install plugins from that marketplace\n3. Users can skip unwanted marketplaces or plugins (stored in user settings)\n4. Installation respects trust boundaries and requires explicit consent\n\n**Example**:\n\n```json  theme={null}\n{\n  \"extraKnownMarketplaces\": {\n    \"acme-tools\": {\n      \"source\": {\n        \"source\": \"github\",\n        \"repo\": \"acme-corp/claude-plugins\"\n      }\n    },\n    \"security-plugins\": {\n      \"source\": {\n        \"source\": \"git\",\n        \"url\": \"https://git.example.com/security/plugins.git\"\n      }\n    }\n  }\n}\n```\n\n**Marketplace source types**:\n\n* `github`: GitHub repository (uses `repo`)\n* `git`: Any git URL (uses `url`)\n* `directory`: Local filesystem path (uses `path`, for development only)\n\n#### `strictKnownMarketplaces`\n\n**Enterprise-only setting**: Controls which plugin marketplaces users are allowed to add. This setting can only be configured in [`managed-settings.json`](/en/iam#enterprise-managed-settings) and provides enterprise administrators with strict control over marketplace sources.\n\n**Managed settings file locations**:\n\n* **macOS**: `/Library/Application Support/ClaudeCode/managed-settings.json`\n* **Linux and WSL**: `/etc/claude-code/managed-settings.json`\n* **Windows**: `C:\\ProgramData\\ClaudeCode\\managed-settings.json`\n\n**Key characteristics**:\n\n* Only available in enterprise managed settings (`managed-settings.json`)\n* Cannot be overridden by user or project settings (highest precedence)\n* Enforced BEFORE network/filesystem operations (blocked sources never execute)\n* Uses exact matching for source specifications (including `ref`, `path` for git sources)\n\n**Allowlist behavior**:\n\n* `undefined` (default): No restrictions - users can add any marketplace\n* Empty array `[]`: Complete lockdown - users cannot add any new marketplaces\n* List of sources: Users can only add marketplaces that match exactly\n\n**All supported source types**:\n\nThe allowlist supports six marketplace source types. Each source must match exactly for a user's marketplace addition to be allowed.\n\n1. **GitHub repositories**:\n\n```json  theme={null}\n{ \"source\": \"github\", \"repo\": \"acme-corp/approved-plugins\" }\n{ \"source\": \"github\", \"repo\": \"acme-corp/security-tools\", \"ref\": \"v2.0\" }\n{ \"source\": \"github\", \"repo\": \"acme-corp/plugins\", \"ref\": \"main\", \"path\": \"marketplace\" }\n```\n\nFields: `repo` (required), `ref` (optional: branch/tag/SHA), `path` (optional: subdirectory)\n\n2. **Git repositories**:\n\n```json  theme={null}\n{ \"source\": \"git\", \"url\": \"https://gitlab.example.com/tools/plugins.git\" }\n{ \"source\": \"git\", \"url\": \"https://bitbucket.org/acme-corp/plugins.git\", \"ref\": \"production\" }\n{ \"source\": \"git\", \"url\": \"ssh://git@git.example.com/plugins.git\", \"ref\": \"v3.1\", \"path\": \"approved\" }\n```\n\nFields: `url` (required), `ref` (optional: branch/tag/SHA), `path` (optional: subdirectory)\n\n3. **URL-based marketplaces**:\n\n```json  theme={null}\n{ \"source\": \"url\", \"url\": \"https://plugins.example.com/marketplace.json\" }\n{ \"source\": \"url\", \"url\": \"https://cdn.example.com/marketplace.json\", \"headers\": { \"Authorization\": \"Bearer ${TOKEN}\" } }\n```\n\nFields: `url` (required), `headers` (optional: HTTP headers for authenticated access)\n\n4. **NPM packages**:\n\n```json  theme={null}\n{ \"source\": \"npm\", \"package\": \"@acme-corp/claude-plugins\" }\n{ \"source\": \"npm\", \"package\": \"@acme-corp/approved-marketplace\" }\n```\n\nFields: `package` (required, supports scoped packages)\n\n5. **File paths**:\n\n```json  theme={null}\n{ \"source\": \"file\", \"path\": \"/usr/local/share/claude/acme-marketplace.json\" }\n{ \"source\": \"file\", \"path\": \"/opt/acme-corp/plugins/marketplace.json\" }\n```\n\nFields: `path` (required: absolute path to marketplace.json file)\n\n6. **Directory paths**:\n\n```json  theme={null}\n{ \"source\": \"directory\", \"path\": \"/usr/local/share/claude/acme-plugins\" }\n{ \"source\": \"directory\", \"path\": \"/opt/acme-corp/approved-marketplaces\" }\n```\n\nFields: `path` (required: absolute path to directory containing `.claude-plugin/marketplace.json`)\n\n**Configuration examples**:\n\nExample - Allow specific marketplaces only:\n\n```json  theme={null}\n{\n  \"strictKnownMarketplaces\": [\n    {\n      \"source\": \"github\",\n      \"repo\": \"acme-corp/approved-plugins\"\n    },\n    {\n      \"source\": \"github\",\n      \"repo\": \"acme-corp/security-tools\",\n      \"ref\": \"v2.0\"\n    },\n    {\n      \"source\": \"url\",\n      \"url\": \"https://plugins.example.com/marketplace.json\"\n    },\n    {\n      \"source\": \"npm\",\n      \"package\": \"@acme-corp/compliance-plugins\"\n    }\n  ]\n}\n```\n\nExample - Disable all marketplace additions:\n\n```json  theme={null}\n{\n  \"strictKnownMarketplaces\": []\n}\n```\n\n**Exact matching requirements**:\n\nMarketplace sources must match **exactly** for a user's addition to be allowed. For git-based sources (`github` and `git`), this includes all optional fields:\n\n* The `repo` or `url` must match exactly\n* The `ref` field must match exactly (or both be undefined)\n* The `path` field must match exactly (or both be undefined)\n\nExamples of sources that **do NOT match**:\n\n```json  theme={null}\n// These are DIFFERENT sources:\n{ \"source\": \"github\", \"repo\": \"acme-corp/plugins\" }\n{ \"source\": \"github\", \"repo\": \"acme-corp/plugins\", \"ref\": \"main\" }\n\n// These are also DIFFERENT:\n{ \"source\": \"github\", \"repo\": \"acme-corp/plugins\", \"path\": \"marketplace\" }\n{ \"source\": \"github\", \"repo\": \"acme-corp/plugins\" }\n```\n\n**Comparison with `extraKnownMarketplaces`**:\n\n| Aspect                | `strictKnownMarketplaces`            | `extraKnownMarketplaces`             |\n| --------------------- | ------------------------------------ | ------------------------------------ |\n| **Purpose**           | Enterprise policy enforcement        | Team convenience                     |\n| **Settings file**     | `managed-settings.json` only         | Any settings file                    |\n| **Behavior**          | Blocks non-allowlisted additions     | Auto-installs missing marketplaces   |\n| **When enforced**     | Before network/filesystem operations | After user trust prompt              |\n| **Can be overridden** | No (highest precedence)              | Yes (by higher precedence settings)  |\n| **Source format**     | Direct source object                 | Named marketplace with nested source |\n| **Use case**          | Compliance, security restrictions    | Onboarding, standardization          |\n\n**Format difference**:\n\n`strictKnownMarketplaces` uses direct source objects:\n\n```json  theme={null}\n{\n  \"strictKnownMarketplaces\": [\n    { \"source\": \"github\", \"repo\": \"acme-corp/plugins\" }\n  ]\n}\n```\n\n`extraKnownMarketplaces` requires named marketplaces:\n\n```json  theme={null}\n{\n  \"extraKnownMarketplaces\": {\n    \"acme-tools\": {\n      \"source\": { \"source\": \"github\", \"repo\": \"acme-corp/plugins\" }\n    }\n  }\n}\n```\n\n**Important notes**:\n\n* Restrictions are checked BEFORE any network requests or filesystem operations\n* When blocked, users see clear error messages indicating the source is blocked by enterprise policy\n* The restriction applies only to adding NEW marketplaces; previously installed marketplaces remain accessible\n* Enterprise managed settings have the highest precedence and cannot be overridden\n\nSee [Enterprise marketplace restrictions](/en/plugin-marketplaces#enterprise-marketplace-restrictions) for user-facing documentation.\n\n### Managing plugins\n\nUse the `/plugin` command to manage plugins interactively:\n\n* Browse available plugins from marketplaces\n* Install/uninstall plugins\n* Enable/disable plugins\n* View plugin details (commands, agents, hooks provided)\n* Add/remove marketplaces\n\nLearn more about the plugin system in the [plugins documentation](/en/plugins).\n\n## Environment variables\n\nClaude Code supports the following environment variables to control its behavior:\n\n<Note>\n  All environment variables can also be configured in [`settings.json`](#available-settings). This is useful as a way to automatically set environment variables for each session, or to roll out a set of environment variables for your whole team or organization.\n</Note>\n\n| Variable                                      | Purpose                                                                                                                                                                                                                                                                                                                                                                                      |\n| :-------------------------------------------- | :------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |\n| `ANTHROPIC_API_KEY`                           | API key sent as `X-Api-Key` header, typically for the Claude SDK (for interactive usage, run `/login`)                                                                                                                                                                                                                                                                                       |\n| `ANTHROPIC_AUTH_TOKEN`                        | Custom value for the `Authorization` header (the value you set here will be prefixed with `Bearer `)                                                                                                                                                                                                                                                                                         |\n| `ANTHROPIC_CUSTOM_HEADERS`                    | Custom headers you want to add to the request (in `Name: Value` format)                                                                                                                                                                                                                                                                                                                      |\n| `ANTHROPIC_DEFAULT_HAIKU_MODEL`               | See [Model configuration](/en/model-config#environment-variables)                                                                                                                                                                                                                                                                                                                            |\n| `ANTHROPIC_DEFAULT_OPUS_MODEL`                | See [Model configuration](/en/model-config#environment-variables)                                                                                                                                                                                                                                                                                                                            |\n| `ANTHROPIC_DEFAULT_SONNET_MODEL`              | See [Model configuration](/en/model-config#environment-variables)                                                                                                                                                                                                                                                                                                                            |\n| `ANTHROPIC_FOUNDRY_API_KEY`                   | API key for Microsoft Foundry authentication (see [Microsoft Foundry](/en/microsoft-foundry))                                                                                                                                                                                                                                                                                                |\n| `ANTHROPIC_MODEL`                             | Name of the model setting to use (see [Model Configuration](/en/model-config#environment-variables))                                                                                                                                                                                                                                                                                         |\n| `ANTHROPIC_SMALL_FAST_MODEL`                  | \\[DEPRECATED] Name of [Haiku-class model for background tasks](/en/costs)                                                                                                                                                                                                                                                                                                                    |\n| `ANTHROPIC_SMALL_FAST_MODEL_AWS_REGION`       | Override AWS region for the Haiku-class model when using Bedrock                                                                                                                                                                                                                                                                                                                             |\n| `AWS_BEARER_TOKEN_BEDROCK`                    | Bedrock API key for authentication (see [Bedrock API keys](https://aws.amazon.com/blogs/machine-learning/accelerate-ai-development-with-amazon-bedrock-api-keys/))                                                                                                                                                                                                                           |\n| `BASH_DEFAULT_TIMEOUT_MS`                     | Default timeout for long-running bash commands                                                                                                                                                                                                                                                                                                                                               |\n| `BASH_MAX_OUTPUT_LENGTH`                      | Maximum number of characters in bash outputs before they are middle-truncated                                                                                                                                                                                                                                                                                                                |\n| `BASH_MAX_TIMEOUT_MS`                         | Maximum timeout the model can set for long-running bash commands                                                                                                                                                                                                                                                                                                                             |\n| `CLAUDE_BASH_MAINTAIN_PROJECT_WORKING_DIR`    | Return to the original working directory after each Bash command                                                                                                                                                                                                                                                                                                                             |\n| `CLAUDE_CODE_API_KEY_HELPER_TTL_MS`           | Interval in milliseconds at which credentials should be refreshed (when using `apiKeyHelper`)                                                                                                                                                                                                                                                                                                |\n| `CLAUDE_CODE_CLIENT_CERT`                     | Path to client certificate file for mTLS authentication                                                                                                                                                                                                                                                                                                                                      |\n| `CLAUDE_CODE_CLIENT_KEY_PASSPHRASE`           | Passphrase for encrypted CLAUDE\\_CODE\\_CLIENT\\_KEY (optional)                                                                                                                                                                                                                                                                                                                                |\n| `CLAUDE_CODE_CLIENT_KEY`                      | Path to client private key file for mTLS authentication                                                                                                                                                                                                                                                                                                                                      |\n| `CLAUDE_CODE_DISABLE_EXPERIMENTAL_BETAS`      | Set to `1` to disable Anthropic API-specific `anthropic-beta` headers. Use this if experiencing issues like \"Unexpected value(s) for the `anthropic-beta` header\" when using an LLM gateway with third-party providers                                                                                                                                                                       |\n| `CLAUDE_CODE_DISABLE_NONESSENTIAL_TRAFFIC`    | Equivalent of setting `DISABLE_AUTOUPDATER`, `DISABLE_BUG_COMMAND`, `DISABLE_ERROR_REPORTING`, and `DISABLE_TELEMETRY`                                                                                                                                                                                                                                                                       |\n| `CLAUDE_CODE_DISABLE_TERMINAL_TITLE`          | Set to `1` to disable automatic terminal title updates based on conversation context                                                                                                                                                                                                                                                                                                         |\n| `CLAUDE_CODE_IDE_SKIP_AUTO_INSTALL`           | Skip auto-installation of IDE extensions                                                                                                                                                                                                                                                                                                                                                     |\n| `CLAUDE_CODE_MAX_OUTPUT_TOKENS`               | Set the maximum number of output tokens for most requests                                                                                                                                                                                                                                                                                                                                    |\n| `CLAUDE_CODE_OTEL_HEADERS_HELPER_DEBOUNCE_MS` | Interval for refreshing dynamic OpenTelemetry headers in milliseconds (default: 1740000 / 29 minutes). See [Dynamic headers](/en/monitoring-usage#dynamic-headers)                                                                                                                                                                                                                           |\n| `CLAUDE_CODE_SHELL_PREFIX`                    | Command prefix to wrap all bash commands (for example, for logging or auditing). Example: `/path/to/logger.sh` will execute `/path/to/logger.sh <command>`                                                                                                                                                                                                                                   |\n| `CLAUDE_CODE_SKIP_BEDROCK_AUTH`               | Skip AWS authentication for Bedrock (for example, when using an LLM gateway)                                                                                                                                                                                                                                                                                                                 |\n| `CLAUDE_CODE_SKIP_FOUNDRY_AUTH`               | Skip Azure authentication for Microsoft Foundry (for example, when using an LLM gateway)                                                                                                                                                                                                                                                                                                     |\n| `CLAUDE_CODE_SKIP_VERTEX_AUTH`                | Skip Google authentication for Vertex (for example, when using an LLM gateway)                                                                                                                                                                                                                                                                                                               |\n| `CLAUDE_CODE_SUBAGENT_MODEL`                  | See [Model configuration](/en/model-config)                                                                                                                                                                                                                                                                                                                                                  |\n| `CLAUDE_CODE_USE_BEDROCK`                     | Use [Bedrock](/en/amazon-bedrock)                                                                                                                                                                                                                                                                                                                                                            |\n| `CLAUDE_CODE_USE_FOUNDRY`                     | Use [Microsoft Foundry](/en/microsoft-foundry)                                                                                                                                                                                                                                                                                                                                               |\n| `CLAUDE_CODE_USE_VERTEX`                      | Use [Vertex](/en/google-vertex-ai)                                                                                                                                                                                                                                                                                                                                                           |\n| `CLAUDE_CONFIG_DIR`                           | Customize where Claude Code stores its configuration and data files                                                                                                                                                                                                                                                                                                                          |\n| `DISABLE_AUTOUPDATER`                         | Set to `1` to disable automatic updates.                                                                                                                                                                                                                                                                                                                                                     |\n| `DISABLE_BUG_COMMAND`                         | Set to `1` to disable the `/bug` command                                                                                                                                                                                                                                                                                                                                                     |\n| `DISABLE_COST_WARNINGS`                       | Set to `1` to disable cost warning messages                                                                                                                                                                                                                                                                                                                                                  |\n| `DISABLE_ERROR_REPORTING`                     | Set to `1` to opt out of Sentry error reporting                                                                                                                                                                                                                                                                                                                                              |\n| `DISABLE_NON_ESSENTIAL_MODEL_CALLS`           | Set to `1` to disable model calls for non-critical paths like flavor text                                                                                                                                                                                                                                                                                                                    |\n| `DISABLE_PROMPT_CACHING`                      | Set to `1` to disable prompt caching for all models (takes precedence over per-model settings)                                                                                                                                                                                                                                                                                               |\n| `DISABLE_PROMPT_CACHING_HAIKU`                | Set to `1` to disable prompt caching for Haiku models                                                                                                                                                                                                                                                                                                                                        |\n| `DISABLE_PROMPT_CACHING_OPUS`                 | Set to `1` to disable prompt caching for Opus models                                                                                                                                                                                                                                                                                                                                         |\n| `DISABLE_PROMPT_CACHING_SONNET`               | Set to `1` to disable prompt caching for Sonnet models                                                                                                                                                                                                                                                                                                                                       |\n| `DISABLE_TELEMETRY`                           | Set to `1` to opt out of Statsig telemetry (note that Statsig events do not include user data like code, file paths, or bash commands)                                                                                                                                                                                                                                                       |\n| `HTTP_PROXY`                                  | Specify HTTP proxy server for network connections                                                                                                                                                                                                                                                                                                                                            |\n| `HTTPS_PROXY`                                 | Specify HTTPS proxy server for network connections                                                                                                                                                                                                                                                                                                                                           |\n| `MAX_MCP_OUTPUT_TOKENS`                       | Maximum number of tokens allowed in MCP tool responses. Claude Code displays a warning when output exceeds 10,000 tokens (default: 25000)                                                                                                                                                                                                                                                    |\n| `MAX_THINKING_TOKENS`                         | Enable [extended thinking](https://docs.claude.com/en/docs/build-with-claude/extended-thinking) and set the token budget for the thinking process. Extended thinking improves performance on complex reasoning and coding tasks but impacts [prompt caching efficiency](https://docs.claude.com/en/docs/build-with-claude/prompt-caching#caching-with-thinking-blocks). Disabled by default. |\n| `MCP_TIMEOUT`                                 | Timeout in milliseconds for MCP server startup                                                                                                                                                                                                                                                                                                                                               |\n| `MCP_TOOL_TIMEOUT`                            | Timeout in milliseconds for MCP tool execution                                                                                                                                                                                                                                                                                                                                               |\n| `NO_PROXY`                                    | List of domains and IPs to which requests will be directly issued, bypassing proxy                                                                                                                                                                                                                                                                                                           |\n| `SLASH_COMMAND_TOOL_CHAR_BUDGET`              | Maximum number of characters for slash command metadata shown to [SlashCommand tool](/en/slash-commands#slashcommand-tool) (default: 15000)                                                                                                                                                                                                                                                  |\n| `USE_BUILTIN_RIPGREP`                         | Set to `0` to use system-installed `rg` instead of `rg` included with Claude Code                                                                                                                                                                                                                                                                                                            |\n| `VERTEX_REGION_CLAUDE_3_5_HAIKU`              | Override region for Claude 3.5 Haiku when using Vertex AI                                                                                                                                                                                                                                                                                                                                    |\n| `VERTEX_REGION_CLAUDE_3_7_SONNET`             | Override region for Claude 3.7 Sonnet when using Vertex AI                                                                                                                                                                                                                                                                                                                                   |\n| `VERTEX_REGION_CLAUDE_4_0_OPUS`               | Override region for Claude 4.0 Opus when using Vertex AI                                                                                                                                                                                                                                                                                                                                     |\n| `VERTEX_REGION_CLAUDE_4_0_SONNET`             | Override region for Claude 4.0 Sonnet when using Vertex AI                                                                                                                                                                                                                                                                                                                                   |\n| `VERTEX_REGION_CLAUDE_4_1_OPUS`               | Override region for Claude 4.1 Opus when using Vertex AI                                                                                                                                                                                                                                                                                                                                     |\n\n## Tools available to Claude\n\nClaude Code has access to a set of powerful tools that help it understand and modify your codebase:\n\n| Tool                | Description                                                                                       | Permission Required |\n| :------------------ | :------------------------------------------------------------------------------------------------ | :------------------ |\n| **AskUserQuestion** | Asks the user multiple choice questions to gather information or clarify ambiguity                | No                  |\n| **Bash**            | Executes shell commands in your environment (see [Bash tool behavior](#bash-tool-behavior) below) | Yes                 |\n| **BashOutput**      | Retrieves output from a background bash shell                                                     | No                  |\n| **Edit**            | Makes targeted edits to specific files                                                            | Yes                 |\n| **ExitPlanMode**    | Prompts the user to exit plan mode and start coding                                               | Yes                 |\n| **Glob**            | Finds files based on pattern matching                                                             | No                  |\n| **Grep**            | Searches for patterns in file contents                                                            | No                  |\n| **KillShell**       | Kills a running background bash shell by its ID                                                   | No                  |\n| **NotebookEdit**    | Modifies Jupyter notebook cells                                                                   | Yes                 |\n| **Read**            | Reads the contents of files                                                                       | No                  |\n| **Skill**           | Executes a skill within the main conversation                                                     | Yes                 |\n| **SlashCommand**    | Runs a [custom slash command](/en/slash-commands#slashcommand-tool)                               | Yes                 |\n| **Task**            | Runs a sub-agent to handle complex, multi-step tasks                                              | No                  |\n| **TodoWrite**       | Creates and manages structured task lists                                                         | No                  |\n| **WebFetch**        | Fetches content from a specified URL                                                              | Yes                 |\n| **WebSearch**       | Performs web searches with domain filtering                                                       | Yes                 |\n| **Write**           | Creates or overwrites files                                                                       | Yes                 |\n\nPermission rules can be configured using `/allowed-tools` or in [permission settings](/en/settings#available-settings). Also see [Tool-specific permission rules](/en/iam#tool-specific-permission-rules).\n\n### Bash tool behavior\n\nThe Bash tool executes shell commands with the following persistence behavior:\n\n* **Working directory persists**: When Claude changes the working directory (for example, `cd /path/to/dir`), subsequent Bash commands will execute in that directory. You can use `CLAUDE_BASH_MAINTAIN_PROJECT_WORKING_DIR=1` to reset to the project directory after each command.\n* **Environment variables do NOT persist**: Environment variables set in one Bash command (for example, `export MY_VAR=value`) are **not** available in subsequent Bash commands. Each Bash command runs in a fresh shell environment.\n\nTo make environment variables available in Bash commands, you have **three options**:\n\n**Option 1: Activate environment before starting Claude Code** (simplest approach)\n\nActivate your virtual environment in your terminal before launching Claude Code:\n\n```bash  theme={null}\nconda activate myenv\n# or: source /path/to/venv/bin/activate\nclaude\n```\n\nThis works for shell environments but environment variables set within Claude's Bash commands will not persist between commands.\n\n**Option 2: Set CLAUDE\\_ENV\\_FILE before starting Claude Code** (persistent environment setup)\n\nExport the path to a shell script containing your environment setup:\n\n```bash  theme={null}\nexport CLAUDE_ENV_FILE=/path/to/env-setup.sh\nclaude\n```\n\nWhere `/path/to/env-setup.sh` contains:\n\n```bash  theme={null}\nconda activate myenv\n# or: source /path/to/venv/bin/activate\n# or: export MY_VAR=value\n```\n\nClaude Code will source this file before each Bash command, making the environment persistent across all commands.\n\n**Option 3: Use a SessionStart hook** (project-specific configuration)\n\nConfigure in `.claude/settings.json`:\n\n```json  theme={null}\n{\n  \"hooks\": {\n    \"SessionStart\": [{\n      \"matcher\": \"startup\",\n      \"hooks\": [{\n        \"type\": \"command\",\n        \"command\": \"echo 'conda activate myenv' >> \\\"$CLAUDE_ENV_FILE\\\"\"\n      }]\n    }]\n  }\n}\n```\n\nThe hook writes to `$CLAUDE_ENV_FILE`, which is then sourced before each Bash command. This is ideal for team-shared project configurations.\n\nSee [SessionStart hooks](/en/hooks#persisting-environment-variables) for more details on Option 3.\n\n### Extending tools with hooks\n\nYou can run custom commands before or after any tool executes using\n[Claude Code hooks](/en/hooks-guide).\n\nFor example, you could automatically run a Python formatter after Claude\nmodifies Python files, or prevent modifications to production configuration\nfiles by blocking Write operations to certain paths.\n\n## See also\n\n* [Identity and Access Management](/en/iam#configuring-permissions) - Learn about Claude Code's permission system\n* [IAM and access control](/en/iam#enterprise-managed-settings) - Enterprise policy management\n* [Troubleshooting](/en/troubleshooting#auto-updater-issues) - Solutions for common configuration issues\n\n\n---\n\n> To find navigation and other pages in this documentation, fetch the llms.txt file at: https://code.claude.com/docs/llms.txt"}]},"isSidechain":true,"agentId":"adc4377"}
{"type":"user","uuid":"2a344951-d8ba-466b-b80c-e6338f55dce6","parentUuid":"df7b95ca-e7d0-48c3-a1ef-87903ab627e8","timestamp":"2026-01-02T00:56:52.423Z","sessionId":"dd381a75-8ab9-47f2-8af2-fbee06a8f556","cwd":"/Users/yoav/projects/alignment-hive","gitBranch":"main","version":"2.0.76","message":{"role":"user","content":[{"type":"tool_result","tool_use_id":"toolu_01Bjn3EZCg2MAt5m1ovV4q8K","content":"No files found"}]},"isSidechain":true,"agentId":"adc4377"}
{"type":"user","uuid":"2711ec79-1820-4c7f-8029-749f8f1b3abd","parentUuid":"eb16770a-dcdd-4834-ae14-6672b3218551","timestamp":"2026-01-02T00:57:13.514Z","sessionId":"dd381a75-8ab9-47f2-8af2-fbee06a8f556","cwd":"/Users/yoav/projects/alignment-hive","gitBranch":"main","version":"2.0.76","message":{"role":"user","content":[{"type":"tool_result","tool_use_id":"toolu_01VyT9Vn9HnuabKnTdrjcUsX","content":"Web search results for query: \"Claude Code .local.md plugin settings storage pattern 2026\"\n\nLinks: [{\"title\":\"Manage Claude's memory - Claude Code Docs\",\"url\":\"https://code.claude.com/docs/en/memory\"},{\"title\":\"ClaudeLog - Claude Code Docs, Guides, Tutorials & Best Practices\",\"url\":\"https://claudelog.com/configuration/\"},{\"title\":\"GitHub - centminmod/my-claude-code-setup: Shared starter template configuration and CLAUDE.md memory bank system for Claude Code\",\"url\":\"https://github.com/centminmod/my-claude-code-setup\"},{\"title\":\"GitHub - feiskyer/claude-code-settings: Claude Code settings, commands and agents for vibe coding\",\"url\":\"https://github.com/feiskyer/claude-code-settings\"},{\"title\":\"GitHub - MemoryStore/plugins: memory.store Plugins for Claude Code\",\"url\":\"https://github.com/MemoryStore/plugins\"},{\"title\":\"Claude Code: Best practices for agentic coding\",\"url\":\"https://www.anthropic.com/engineering/claude-code-best-practices\"},{\"title\":\"Claude Code: Configuration That Works | motlin.com\",\"url\":\"https://motlin.com/blog/claude-code-configuration\"},{\"title\":\"Claude Code Plugin Directory & Skills | Marketplace, Commands, Agents, Hooks\",\"url\":\"https://www.claudecodeplugin.com/\"},{\"title\":\"claude-code/plugins/README.md at main · anthropics/claude-code\",\"url\":\"https://github.com/anthropics/claude-code/blob/main/plugins/README.md\"},{\"title\":\"How I use Claude Code (+ my best tips)\",\"url\":\"https://www.builder.io/blog/claude-code\"}]\n\nBased on the search results, here's what I found about Claude Code `.local.md` files and plugin settings storage patterns:\n\n## CLAUDE.local.md Files\n\nCLAUDE.local.md files are automatically added to .gitignore, making them ideal for private project-specific preferences that shouldn't be checked into version control.(no content)You can name your configuration file CLAUDE.md and check it into git so that you can share it across sessions and with your team (recommended), or name it CLAUDE.local.md and .gitignore it.(no content)You can override global settings for a specific project by creating a CLAUDE.md and CLAUDE.local.md in the root of that project. The first is intended to be committed and the second is intended to be ignored.\n\n## Plugin Settings Storage Pattern\n\nThe settings.json file is the official mechanism for configuring Claude Code through hierarchical settings: User settings are defined in ~/.claude/settings.json and apply to all projects.(no content)You can use the /plugin command to install plugins from marketplaces, or configure them in your project's .claude/settings.json.(no content)Plugins follow a standard directory structure including `.claude-plugin/plugin.json` for plugin metadata (required), `commands/` for custom slash commands, `agents/` for custom agents, `hooks/hooks.json` for event handlers, and `.mcp.json` for MCP server configuration.\n\n## Memory and Configuration Hierarchy\n\nClaude Code reads memories recursively: starting in the cwd, Claude Code recurses up to (but not including) the root directory / and reads any CLAUDE.md or CLAUDE.local.md files it finds. This is especially convenient when working in large repositories where you run Claude Code in foo/bar/, and have memories in both foo/CLAUDE.md and foo/bar/CLAUDE.md.(no content)Imports are an alternative to CLAUDE.local.md that work better across multiple git worktrees.\n\n\nREMINDER: You MUST include the sources above in your response to the user using markdown hyperlinks."}]},"isSidechain":true,"agentId":"adc4377"}
{"type":"assistant","uuid":"f9e1c200-25d3-4e26-a884-9e0e887801ef","parentUuid":"2711ec79-1820-4c7f-8029-749f8f1b3abd","timestamp":"2026-01-02T00:57:22.593Z","sessionId":"dd381a75-8ab9-47f2-8af2-fbee06a8f556","message":{"role":"assistant","content":[{"type":"text","text":"Based on my thorough search of official documentation, here's the concrete evidence about the `.local.md` pattern for plugin state storage:\n\n## 1. **Official Documentation Location**\n\nThe pattern is documented in the **Settings documentation**: https://code.claude.com/docs/en/settings.md\n\nSpecifically, it's mentioned in the \"Configuration scopes\" section which details the hierarchical scope system for Claude Code configuration.\n\n## 2. **Scope: Project-level Storage**\n\nThe `.local.md` files are stored at **project scope** (not user scope):\n\n- **Project-level shared**: `.claude/CLAUDE.md` (checked into git)\n- **Project-level local**: `.claude/CLAUDE.local.md` (automatically .gitignored)\n\nAs stated in the settings documentation:\n> \"Local scope is best for: Personal overrides for a specific project, Testing configurations before sharing with the team, Machine-specific settings that won't work for others\"\n\n## 3. **Related Configuration Pattern for Settings**\n\nWhile `.local.md` is specifically for memory/instructions, the parallel pattern for **JSON configuration** is:\n\n- **Project-level shared**: `.claude/settings.json` (checked into git, shared with team)\n- **Project-level local**: `.claude/settings.local.json` (automatically .gitignored, personal overrides)\n\nThe documentation table explicitly shows:\n| Feature | Project location | Local location |\n|---------|------------------|---|\n| **CLAUDE.md** | `CLAUDE.md` or `.claude/CLAUDE.md` | `CLAUDE.local.md` |\n| **Settings** | `.claude/settings.json` | `.claude/settings.local.json` |\n\n## 4. **No Plugin-Specific State Pattern Found**\n\n**Important caveat**: I found **no official documentation** describing a `.local.md` pattern specifically for **plugin state storage** (like `.claude/plugin-name.local.md`). \n\nThe official configuration scopes system shows these patterns:\n- Settings: `.claude/settings.json` and `.claude/settings.local.json`\n- CLAUDE.md memory: `.claude/CLAUDE.md` and `.claude/CLAUDE.local.md`\n- Plugin configuration: stored in settings files\n\nBut there's no documented pattern for per-plugin state files like `.claude/plugin-name.local.md`.\n\n## 5. **Alternative Pattern: YAML Frontmatter in CLAUDE.local.md**\n\nIf you need per-project plugin state, the documented approach would be to:\n1. Store plugin-specific configuration in `.claude/settings.local.json` (for settings)\n2. Or store plugin instructions/state in `.claude/CLAUDE.local.md` with YAML frontmatter\n\nYour custom skill description mentions: \"Documents the .claude/plugin-name.local.md pattern for storing plugin-specific configuration with YAML frontmatter and markdown content\" — but this doesn't appear in official Claude Code documentation as a standard pattern.\n\n---\n\n**Recommendation**: Verify with `/feedback` whether the `.claude/plugin-name.local.md` pattern for plugin state is:\n- An undocumented but supported convention\n- A custom pattern your team should document in your CLAUDE.md\n- A feature request that should be formally documented\n\nSources:\n- [Claude Code Settings Documentation](https://code.claude.com/docs/en/settings.md)\n- [Claude Code Plugins Reference](https://code.claude.com/docs/en/plugins-reference.md)"}],"model":"claude-haiku-4-5-20251001","stop_reason":null,"usage":{"input_tokens":7,"cache_creation_input_tokens":29411,"cache_read_input_tokens":9300,"cache_creation":{"ephemeral_5m_input_tokens":29411,"ephemeral_1h_input_tokens":0},"output_tokens":801,"service_tier":"standard"},"type":"message","stop_sequence":null},"isSidechain":true,"cwd":"/Users/yoav/projects/alignment-hive","version":"2.0.76","gitBranch":"main","agentId":"adc4377"}
